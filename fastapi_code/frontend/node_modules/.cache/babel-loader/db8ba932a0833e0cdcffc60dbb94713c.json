{"ast":null,"code":"var __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\n\nimport * as React from 'react';\nimport { isValidElement, Children, cloneElement, useCallback } from 'react';\nimport PropTypes from 'prop-types';\nimport { sanitizeListRestProps, useListContext, useVersion } from 'ra-core';\nimport { Checkbox, Table, TableCell, TableHead, TableRow } from '@material-ui/core';\nimport classnames from 'classnames';\nimport DatagridHeaderCell from './DatagridHeaderCell';\nimport DatagridLoading from './DatagridLoading';\nimport DatagridBody, { PureDatagridBody } from './DatagridBody';\nimport useDatagridStyles from './useDatagridStyles';\n/**\n * The Datagrid component renders a list of records as a table.\n * It is usually used as a child of the <List> and <ReferenceManyField> components.\n *\n * Props:\n *  - rowStyle\n *\n * @example Display all posts as a datagrid\n * const postRowStyle = (record, index) => ({\n *     backgroundColor: record.nb_views >= 500 ? '#efe' : 'white',\n * });\n * export const PostList = (props) => (\n *     <List {...props}>\n *         <Datagrid rowStyle={postRowStyle}>\n *             <TextField source=\"id\" />\n *             <TextField source=\"title\" />\n *             <TextField source=\"body\" />\n *             <EditButton />\n *         </Datagrid>\n *     </List>\n * );\n *\n * @example Display all the comments of the current post as a datagrid\n * <ReferenceManyField reference=\"comments\" target=\"post_id\">\n *     <Datagrid>\n *         <TextField source=\"id\" />\n *         <TextField source=\"body\" />\n *         <DateField source=\"created_at\" />\n *         <EditButton />\n *     </Datagrid>\n * </ReferenceManyField>\n */\n\nvar Datagrid = function (props) {\n  var classes = useDatagridStyles(props);\n\n  var _a = props.optimized,\n      optimized = _a === void 0 ? false : _a,\n      _b = props.body,\n      body = _b === void 0 ? optimized ? React.createElement(PureDatagridBody, null) : React.createElement(DatagridBody, null) : _b,\n      children = props.children,\n      classesOverride = props.classes,\n      className = props.className,\n      expand = props.expand,\n      _c = props.hasBulkActions,\n      hasBulkActions = _c === void 0 ? false : _c,\n      hover = props.hover,\n      isRowSelectable = props.isRowSelectable,\n      rowClick = props.rowClick,\n      rowStyle = props.rowStyle,\n      _d = props.size,\n      size = _d === void 0 ? 'small' : _d,\n      rest = __rest(props, [\"optimized\", \"body\", \"children\", \"classes\", \"className\", \"expand\", \"hasBulkActions\", \"hover\", \"isRowSelectable\", \"rowClick\", \"rowStyle\", \"size\"]);\n\n  var _e = useListContext(props),\n      basePath = _e.basePath,\n      currentSort = _e.currentSort,\n      data = _e.data,\n      ids = _e.ids,\n      loaded = _e.loaded,\n      onSelect = _e.onSelect,\n      onToggleItem = _e.onToggleItem,\n      resource = _e.resource,\n      selectedIds = _e.selectedIds,\n      setSort = _e.setSort,\n      total = _e.total;\n\n  var version = useVersion();\n  var updateSort = useCallback(function (event) {\n    event.stopPropagation();\n    var newField = event.currentTarget.dataset.field;\n    var newOrder = currentSort.field === newField ? currentSort.order === 'ASC' ? 'DESC' : 'ASC' : event.currentTarget.dataset.order;\n    setSort(newField, newOrder);\n  }, [currentSort.field, currentSort.order, setSort]);\n  var handleSelectAll = useCallback(function (event) {\n    if (event.target.checked) {\n      var all_1 = ids.concat(selectedIds.filter(function (id) {\n        return !ids.includes(id);\n      }));\n      onSelect(isRowSelectable ? all_1.filter(function (id) {\n        return isRowSelectable(data[id]);\n      }) : all_1);\n    } else {\n      onSelect([]);\n    }\n  }, [data, ids, onSelect, isRowSelectable, selectedIds]);\n  /**\n   * if loaded is false, the list displays for the first time, and the dataProvider hasn't answered yet\n   * if loaded is true, the data for the list has at least been returned once by the dataProvider\n   * if loaded is undefined, the Datagrid parent doesn't track loading state (e.g. ReferenceArrayField)\n   */\n\n  if (loaded === false) {\n    return React.createElement(DatagridLoading, {\n      classes: classes,\n      className: className,\n      expand: expand,\n      hasBulkActions: hasBulkActions,\n      nbChildren: React.Children.count(children),\n      size: size\n    });\n  }\n  /**\n   * Once loaded, the data for the list may be empty. Instead of\n   * displaying the table header with zero data rows,\n   * the datagrid displays nothing in this case.\n   */\n\n\n  if (loaded && (ids.length === 0 || total === 0)) {\n    return null;\n  }\n\n  var all = isRowSelectable ? ids.filter(function (id) {\n    return isRowSelectable(data[id]);\n  }) : ids;\n  /**\n   * After the initial load, if the data for the list isn't empty,\n   * and even if the data is refreshing (e.g. after a filter change),\n   * the datagrid displays the current data.\n   */\n\n  return React.createElement(Table, __assign({\n    className: classnames(classes.table, className),\n    size: size\n  }, sanitizeListRestProps(rest)), React.createElement(TableHead, {\n    className: classes.thead\n  }, React.createElement(TableRow, {\n    className: classnames(classes.row, classes.headerRow)\n  }, expand && React.createElement(TableCell, {\n    padding: \"none\",\n    className: classnames(classes.headerCell, classes.expandHeader)\n  }), hasBulkActions && React.createElement(TableCell, {\n    padding: \"checkbox\",\n    className: classes.headerCell\n  }, React.createElement(Checkbox, {\n    className: \"select-all\",\n    color: \"primary\",\n    checked: selectedIds.length > 0 && all.length > 0 && all.every(function (id) {\n      return selectedIds.includes(id);\n    }),\n    onChange: handleSelectAll\n  })), Children.map(children, function (field, index) {\n    return isValidElement(field) ? React.createElement(DatagridHeaderCell, {\n      className: classes.headerCell,\n      currentSort: currentSort,\n      field: field,\n      isSorting: currentSort.field === (field.props.sortBy || field.props.source),\n      key: field.props.source || index,\n      resource: resource,\n      updateSort: updateSort\n    }) : null;\n  }))), cloneElement(body, {\n    basePath: basePath,\n    className: classes.tbody,\n    classes: classes,\n    expand: expand,\n    rowClick: rowClick,\n    data: data,\n    hasBulkActions: hasBulkActions,\n    hover: hover,\n    ids: ids,\n    onToggleItem: onToggleItem,\n    resource: resource,\n    rowStyle: rowStyle,\n    selectedIds: selectedIds,\n    isRowSelectable: isRowSelectable,\n    version: version\n  }, children));\n};\n\nDatagrid.propTypes = {\n  basePath: PropTypes.string,\n  body: PropTypes.element,\n  children: PropTypes.node.isRequired,\n  classes: PropTypes.object,\n  className: PropTypes.string,\n  currentSort: PropTypes.shape({\n    field: PropTypes.string,\n    order: PropTypes.string\n  }),\n  data: PropTypes.object,\n  // @ts-ignore\n  expand: PropTypes.oneOfType([PropTypes.element, PropTypes.elementType]),\n  hasBulkActions: PropTypes.bool,\n  hover: PropTypes.bool,\n  ids: PropTypes.arrayOf(PropTypes.any),\n  loading: PropTypes.bool,\n  onSelect: PropTypes.func,\n  onToggleItem: PropTypes.func,\n  resource: PropTypes.string,\n  rowClick: PropTypes.oneOfType([PropTypes.string, PropTypes.func]),\n  rowStyle: PropTypes.func,\n  selectedIds: PropTypes.arrayOf(PropTypes.any),\n  setSort: PropTypes.func,\n  total: PropTypes.number,\n  version: PropTypes.number,\n  isRowSelectable: PropTypes.func\n};\nexport default Datagrid;","map":{"version":3,"sources":["/node_modules/ra-ui-materialui/esm/list/datagrid/Datagrid.js"],"names":["__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","__rest","e","indexOf","getOwnPropertySymbols","propertyIsEnumerable","React","isValidElement","Children","cloneElement","useCallback","PropTypes","sanitizeListRestProps","useListContext","useVersion","Checkbox","Table","TableCell","TableHead","TableRow","classnames","DatagridHeaderCell","DatagridLoading","DatagridBody","PureDatagridBody","useDatagridStyles","Datagrid","props","classes","_a","optimized","_b","body","createElement","children","classesOverride","className","expand","_c","hasBulkActions","hover","isRowSelectable","rowClick","rowStyle","_d","size","rest","_e","basePath","currentSort","data","ids","loaded","onSelect","onToggleItem","resource","selectedIds","setSort","total","version","updateSort","event","stopPropagation","newField","currentTarget","dataset","field","newOrder","order","handleSelectAll","target","checked","all_1","concat","filter","id","includes","nbChildren","count","all","table","thead","row","headerRow","padding","headerCell","expandHeader","color","every","onChange","map","index","isSorting","sortBy","source","key","tbody","propTypes","string","element","node","isRequired","object","shape","oneOfType","elementType","bool","arrayOf","any","loading","func","number"],"mappings":"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","sourcesContent":["var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport * as React from 'react';\nimport { isValidElement, Children, cloneElement, useCallback, } from 'react';\nimport PropTypes from 'prop-types';\nimport { sanitizeListRestProps, useListContext, useVersion, } from 'ra-core';\nimport { Checkbox, Table, TableCell, TableHead, TableRow, } from '@material-ui/core';\nimport classnames from 'classnames';\nimport DatagridHeaderCell from './DatagridHeaderCell';\nimport DatagridLoading from './DatagridLoading';\nimport DatagridBody, { PureDatagridBody } from './DatagridBody';\nimport useDatagridStyles from './useDatagridStyles';\n/**\n * The Datagrid component renders a list of records as a table.\n * It is usually used as a child of the <List> and <ReferenceManyField> components.\n *\n * Props:\n *  - rowStyle\n *\n * @example Display all posts as a datagrid\n * const postRowStyle = (record, index) => ({\n *     backgroundColor: record.nb_views >= 500 ? '#efe' : 'white',\n * });\n * export const PostList = (props) => (\n *     <List {...props}>\n *         <Datagrid rowStyle={postRowStyle}>\n *             <TextField source=\"id\" />\n *             <TextField source=\"title\" />\n *             <TextField source=\"body\" />\n *             <EditButton />\n *         </Datagrid>\n *     </List>\n * );\n *\n * @example Display all the comments of the current post as a datagrid\n * <ReferenceManyField reference=\"comments\" target=\"post_id\">\n *     <Datagrid>\n *         <TextField source=\"id\" />\n *         <TextField source=\"body\" />\n *         <DateField source=\"created_at\" />\n *         <EditButton />\n *     </Datagrid>\n * </ReferenceManyField>\n */\nvar Datagrid = function (props) {\n    var classes = useDatagridStyles(props);\n    var _a = props.optimized, optimized = _a === void 0 ? false : _a, _b = props.body, body = _b === void 0 ? optimized ? React.createElement(PureDatagridBody, null) : React.createElement(DatagridBody, null) : _b, children = props.children, classesOverride = props.classes, className = props.className, expand = props.expand, _c = props.hasBulkActions, hasBulkActions = _c === void 0 ? false : _c, hover = props.hover, isRowSelectable = props.isRowSelectable, rowClick = props.rowClick, rowStyle = props.rowStyle, _d = props.size, size = _d === void 0 ? 'small' : _d, rest = __rest(props, [\"optimized\", \"body\", \"children\", \"classes\", \"className\", \"expand\", \"hasBulkActions\", \"hover\", \"isRowSelectable\", \"rowClick\", \"rowStyle\", \"size\"]);\n    var _e = useListContext(props), basePath = _e.basePath, currentSort = _e.currentSort, data = _e.data, ids = _e.ids, loaded = _e.loaded, onSelect = _e.onSelect, onToggleItem = _e.onToggleItem, resource = _e.resource, selectedIds = _e.selectedIds, setSort = _e.setSort, total = _e.total;\n    var version = useVersion();\n    var updateSort = useCallback(function (event) {\n        event.stopPropagation();\n        var newField = event.currentTarget.dataset.field;\n        var newOrder = currentSort.field === newField\n            ? currentSort.order === 'ASC'\n                ? 'DESC'\n                : 'ASC'\n            : event.currentTarget.dataset.order;\n        setSort(newField, newOrder);\n    }, [currentSort.field, currentSort.order, setSort]);\n    var handleSelectAll = useCallback(function (event) {\n        if (event.target.checked) {\n            var all_1 = ids.concat(selectedIds.filter(function (id) { return !ids.includes(id); }));\n            onSelect(isRowSelectable\n                ? all_1.filter(function (id) { return isRowSelectable(data[id]); })\n                : all_1);\n        }\n        else {\n            onSelect([]);\n        }\n    }, [data, ids, onSelect, isRowSelectable, selectedIds]);\n    /**\n     * if loaded is false, the list displays for the first time, and the dataProvider hasn't answered yet\n     * if loaded is true, the data for the list has at least been returned once by the dataProvider\n     * if loaded is undefined, the Datagrid parent doesn't track loading state (e.g. ReferenceArrayField)\n     */\n    if (loaded === false) {\n        return (React.createElement(DatagridLoading, { classes: classes, className: className, expand: expand, hasBulkActions: hasBulkActions, nbChildren: React.Children.count(children), size: size }));\n    }\n    /**\n     * Once loaded, the data for the list may be empty. Instead of\n     * displaying the table header with zero data rows,\n     * the datagrid displays nothing in this case.\n     */\n    if (loaded && (ids.length === 0 || total === 0)) {\n        return null;\n    }\n    var all = isRowSelectable\n        ? ids.filter(function (id) { return isRowSelectable(data[id]); })\n        : ids;\n    /**\n     * After the initial load, if the data for the list isn't empty,\n     * and even if the data is refreshing (e.g. after a filter change),\n     * the datagrid displays the current data.\n     */\n    return (React.createElement(Table, __assign({ className: classnames(classes.table, className), size: size }, sanitizeListRestProps(rest)),\n        React.createElement(TableHead, { className: classes.thead },\n            React.createElement(TableRow, { className: classnames(classes.row, classes.headerRow) },\n                expand && (React.createElement(TableCell, { padding: \"none\", className: classnames(classes.headerCell, classes.expandHeader) })),\n                hasBulkActions && (React.createElement(TableCell, { padding: \"checkbox\", className: classes.headerCell },\n                    React.createElement(Checkbox, { className: \"select-all\", color: \"primary\", checked: selectedIds.length > 0 &&\n                            all.length > 0 &&\n                            all.every(function (id) { return selectedIds.includes(id); }), onChange: handleSelectAll }))),\n                Children.map(children, function (field, index) {\n                    return isValidElement(field) ? (React.createElement(DatagridHeaderCell, { className: classes.headerCell, currentSort: currentSort, field: field, isSorting: currentSort.field ===\n                            (field.props.sortBy ||\n                                field.props.source), key: field.props.source || index, resource: resource, updateSort: updateSort })) : null;\n                }))),\n        cloneElement(body, {\n            basePath: basePath,\n            className: classes.tbody,\n            classes: classes,\n            expand: expand,\n            rowClick: rowClick,\n            data: data,\n            hasBulkActions: hasBulkActions,\n            hover: hover,\n            ids: ids,\n            onToggleItem: onToggleItem,\n            resource: resource,\n            rowStyle: rowStyle,\n            selectedIds: selectedIds,\n            isRowSelectable: isRowSelectable,\n            version: version,\n        }, children)));\n};\nDatagrid.propTypes = {\n    basePath: PropTypes.string,\n    body: PropTypes.element,\n    children: PropTypes.node.isRequired,\n    classes: PropTypes.object,\n    className: PropTypes.string,\n    currentSort: PropTypes.shape({\n        field: PropTypes.string,\n        order: PropTypes.string,\n    }),\n    data: PropTypes.object,\n    // @ts-ignore\n    expand: PropTypes.oneOfType([PropTypes.element, PropTypes.elementType]),\n    hasBulkActions: PropTypes.bool,\n    hover: PropTypes.bool,\n    ids: PropTypes.arrayOf(PropTypes.any),\n    loading: PropTypes.bool,\n    onSelect: PropTypes.func,\n    onToggleItem: PropTypes.func,\n    resource: PropTypes.string,\n    rowClick: PropTypes.oneOfType([PropTypes.string, PropTypes.func]),\n    rowStyle: PropTypes.func,\n    selectedIds: PropTypes.arrayOf(PropTypes.any),\n    setSort: PropTypes.func,\n    total: PropTypes.number,\n    version: PropTypes.number,\n    isRowSelectable: PropTypes.func,\n};\nexport default Datagrid;\n"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"var __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\n\nimport * as React from 'react';\nimport { useCallback } from 'react';\nimport PropTypes from 'prop-types';\nimport DownloadIcon from '@material-ui/icons/GetApp';\nimport { fetchRelatedRecords, useDataProvider, useNotify, useListContext } from 'ra-core';\nimport Button from './Button';\n\nvar ExportButton = function (props) {\n  var _a = props.maxResults,\n      maxResults = _a === void 0 ? 1000 : _a,\n      onClick = props.onClick,\n      _b = props.label,\n      label = _b === void 0 ? 'ra.action.export' : _b,\n      _c = props.icon,\n      icon = _c === void 0 ? defaultIcon : _c,\n      customExporter = props.exporter,\n      sort = props.sort,\n      // deprecated, to be removed in v4\n  rest = __rest(props, [\"maxResults\", \"onClick\", \"label\", \"icon\", \"exporter\", \"sort\"]);\n\n  var _d = useListContext(props),\n      filterValues = _d.filterValues,\n      resource = _d.resource,\n      currentSort = _d.currentSort,\n      exporterFromContext = _d.exporter,\n      total = _d.total;\n\n  var exporter = customExporter || exporterFromContext;\n  var dataProvider = useDataProvider();\n  var notify = useNotify();\n  var handleClick = useCallback(function (event) {\n    dataProvider.getList(resource, {\n      sort: currentSort || sort,\n      filter: filterValues,\n      pagination: {\n        page: 1,\n        perPage: maxResults\n      }\n    }).then(function (_a) {\n      var data = _a.data;\n      return exporter && exporter(data, fetchRelatedRecords(dataProvider), dataProvider, resource);\n    }).catch(function (error) {\n      console.error(error);\n      notify('ra.notification.http_error', 'warning');\n    });\n\n    if (typeof onClick === 'function') {\n      onClick(event);\n    }\n  }, [currentSort, dataProvider, exporter, filterValues, maxResults, notify, onClick, resource, sort]);\n  return React.createElement(Button, __assign({\n    onClick: handleClick,\n    label: label,\n    disabled: total === 0\n  }, sanitizeRestProps(rest)), icon);\n};\n\nvar defaultIcon = React.createElement(DownloadIcon, null);\n\nvar sanitizeRestProps = function (_a) {\n  var basePath = _a.basePath,\n      filterValues = _a.filterValues,\n      resource = _a.resource,\n      rest = __rest(_a, [\"basePath\", \"filterValues\", \"resource\"]);\n\n  return rest;\n};\n\nExportButton.propTypes = {\n  basePath: PropTypes.string,\n  exporter: PropTypes.func,\n  filterValues: PropTypes.object,\n  label: PropTypes.string,\n  maxResults: PropTypes.number,\n  resource: PropTypes.string,\n  sort: PropTypes.exact({\n    field: PropTypes.string,\n    order: PropTypes.string\n  }),\n  icon: PropTypes.element\n};\nexport default ExportButton;","map":{"version":3,"sources":["/node_modules/ra-ui-materialui/esm/button/ExportButton.js"],"names":["__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","__rest","e","indexOf","getOwnPropertySymbols","propertyIsEnumerable","React","useCallback","PropTypes","DownloadIcon","fetchRelatedRecords","useDataProvider","useNotify","useListContext","Button","ExportButton","props","_a","maxResults","onClick","_b","label","_c","icon","defaultIcon","customExporter","exporter","sort","rest","_d","filterValues","resource","currentSort","exporterFromContext","total","dataProvider","notify","handleClick","event","getList","filter","pagination","page","perPage","then","data","catch","error","console","createElement","disabled","sanitizeRestProps","basePath","propTypes","string","func","object","number","exact","field","order","element"],"mappings":"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","sourcesContent":["var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport * as React from 'react';\nimport { useCallback } from 'react';\nimport PropTypes from 'prop-types';\nimport DownloadIcon from '@material-ui/icons/GetApp';\nimport { fetchRelatedRecords, useDataProvider, useNotify, useListContext, } from 'ra-core';\nimport Button from './Button';\nvar ExportButton = function (props) {\n    var _a = props.maxResults, maxResults = _a === void 0 ? 1000 : _a, onClick = props.onClick, _b = props.label, label = _b === void 0 ? 'ra.action.export' : _b, _c = props.icon, icon = _c === void 0 ? defaultIcon : _c, customExporter = props.exporter, sort = props.sort, // deprecated, to be removed in v4\n    rest = __rest(props, [\"maxResults\", \"onClick\", \"label\", \"icon\", \"exporter\", \"sort\"]);\n    var _d = useListContext(props), filterValues = _d.filterValues, resource = _d.resource, currentSort = _d.currentSort, exporterFromContext = _d.exporter, total = _d.total;\n    var exporter = customExporter || exporterFromContext;\n    var dataProvider = useDataProvider();\n    var notify = useNotify();\n    var handleClick = useCallback(function (event) {\n        dataProvider\n            .getList(resource, {\n            sort: currentSort || sort,\n            filter: filterValues,\n            pagination: { page: 1, perPage: maxResults },\n        })\n            .then(function (_a) {\n            var data = _a.data;\n            return exporter &&\n                exporter(data, fetchRelatedRecords(dataProvider), dataProvider, resource);\n        })\n            .catch(function (error) {\n            console.error(error);\n            notify('ra.notification.http_error', 'warning');\n        });\n        if (typeof onClick === 'function') {\n            onClick(event);\n        }\n    }, [\n        currentSort,\n        dataProvider,\n        exporter,\n        filterValues,\n        maxResults,\n        notify,\n        onClick,\n        resource,\n        sort,\n    ]);\n    return (React.createElement(Button, __assign({ onClick: handleClick, label: label, disabled: total === 0 }, sanitizeRestProps(rest)), icon));\n};\nvar defaultIcon = React.createElement(DownloadIcon, null);\nvar sanitizeRestProps = function (_a) {\n    var basePath = _a.basePath, filterValues = _a.filterValues, resource = _a.resource, rest = __rest(_a, [\"basePath\", \"filterValues\", \"resource\"]);\n    return rest;\n};\nExportButton.propTypes = {\n    basePath: PropTypes.string,\n    exporter: PropTypes.func,\n    filterValues: PropTypes.object,\n    label: PropTypes.string,\n    maxResults: PropTypes.number,\n    resource: PropTypes.string,\n    sort: PropTypes.exact({\n        field: PropTypes.string,\n        order: PropTypes.string,\n    }),\n    icon: PropTypes.element,\n};\nexport default ExportButton;\n"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"var __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\n\nimport * as React from 'react';\nimport { useState, useCallback, useRef } from 'react';\nimport PropTypes from 'prop-types';\nimport Menu from '@material-ui/core/Menu';\nimport { makeStyles } from '@material-ui/core/styles';\nimport ContentFilter from '@material-ui/icons/FilterList';\nimport classnames from 'classnames';\nimport lodashGet from 'lodash/get';\nimport FilterButtonMenuItem from './FilterButtonMenuItem';\nimport Button from '../../button/Button';\nvar useStyles = makeStyles({\n  root: {\n    display: 'inline-block'\n  }\n}, {\n  name: 'RaFilterButton'\n});\n\nvar FilterButton = function (props) {\n  var filters = props.filters,\n      _a = props.displayedFilters,\n      displayedFilters = _a === void 0 ? {} : _a,\n      filterValues = props.filterValues,\n      showFilter = props.showFilter,\n      classesOverride = props.classes,\n      className = props.className,\n      resource = props.resource,\n      rest = __rest(props, [\"filters\", \"displayedFilters\", \"filterValues\", \"showFilter\", \"classes\", \"className\", \"resource\"]);\n\n  var _b = useState(false),\n      open = _b[0],\n      setOpen = _b[1];\n\n  var anchorEl = useRef();\n  var classes = useStyles(props);\n  var hiddenFilters = filters.filter(function (filterElement) {\n    return !filterElement.props.alwaysOn && !displayedFilters[filterElement.props.source] && typeof lodashGet(filterValues, filterElement.props.source) === 'undefined';\n  });\n  var handleClickButton = useCallback(function (event) {\n    // This prevents ghost click.\n    event.preventDefault();\n    setOpen(true);\n    anchorEl.current = event.currentTarget;\n  }, [anchorEl, setOpen]);\n  var handleRequestClose = useCallback(function () {\n    setOpen(false);\n  }, [setOpen]);\n  var handleShow = useCallback(function (_a) {\n    var source = _a.source,\n        defaultValue = _a.defaultValue;\n    showFilter(source, defaultValue);\n    setOpen(false);\n  }, [showFilter, setOpen]);\n  if (hiddenFilters.length === 0) return null;\n  return React.createElement(\"div\", __assign({\n    className: classnames(classes.root, className)\n  }, rest), React.createElement(Button, {\n    className: \"add-filter\",\n    label: \"ra.action.add_filter\",\n    onClick: handleClickButton\n  }, React.createElement(ContentFilter, null)), React.createElement(Menu, {\n    open: open,\n    anchorEl: anchorEl.current,\n    onClose: handleRequestClose\n  }, hiddenFilters.map(function (filterElement) {\n    return React.createElement(FilterButtonMenuItem, {\n      key: filterElement.props.source,\n      filter: filterElement,\n      resource: resource,\n      onShow: handleShow\n    });\n  })));\n};\n\nFilterButton.propTypes = {\n  resource: PropTypes.string.isRequired,\n  filters: PropTypes.arrayOf(PropTypes.node).isRequired,\n  displayedFilters: PropTypes.object,\n  filterValues: PropTypes.object.isRequired,\n  showFilter: PropTypes.func.isRequired,\n  classes: PropTypes.object,\n  className: PropTypes.string\n};\nexport default FilterButton;","map":{"version":3,"sources":["/node_modules/ra-ui-materialui/esm/list/filter/FilterButton.js"],"names":["__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","__rest","e","indexOf","getOwnPropertySymbols","propertyIsEnumerable","React","useState","useCallback","useRef","PropTypes","Menu","makeStyles","ContentFilter","classnames","lodashGet","FilterButtonMenuItem","Button","useStyles","root","display","name","FilterButton","props","filters","_a","displayedFilters","filterValues","showFilter","classesOverride","classes","className","resource","rest","_b","open","setOpen","anchorEl","hiddenFilters","filter","filterElement","alwaysOn","source","handleClickButton","event","preventDefault","current","currentTarget","handleRequestClose","handleShow","defaultValue","createElement","label","onClick","onClose","map","key","onShow","propTypes","string","isRequired","arrayOf","node","object","func"],"mappings":"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","sourcesContent":["var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport * as React from 'react';\nimport { useState, useCallback, useRef, } from 'react';\nimport PropTypes from 'prop-types';\nimport Menu from '@material-ui/core/Menu';\nimport { makeStyles } from '@material-ui/core/styles';\nimport ContentFilter from '@material-ui/icons/FilterList';\nimport classnames from 'classnames';\nimport lodashGet from 'lodash/get';\nimport FilterButtonMenuItem from './FilterButtonMenuItem';\nimport Button from '../../button/Button';\nvar useStyles = makeStyles({\n    root: { display: 'inline-block' },\n}, { name: 'RaFilterButton' });\nvar FilterButton = function (props) {\n    var filters = props.filters, _a = props.displayedFilters, displayedFilters = _a === void 0 ? {} : _a, filterValues = props.filterValues, showFilter = props.showFilter, classesOverride = props.classes, className = props.className, resource = props.resource, rest = __rest(props, [\"filters\", \"displayedFilters\", \"filterValues\", \"showFilter\", \"classes\", \"className\", \"resource\"]);\n    var _b = useState(false), open = _b[0], setOpen = _b[1];\n    var anchorEl = useRef();\n    var classes = useStyles(props);\n    var hiddenFilters = filters.filter(function (filterElement) {\n        return !filterElement.props.alwaysOn &&\n            !displayedFilters[filterElement.props.source] &&\n            typeof lodashGet(filterValues, filterElement.props.source) ===\n                'undefined';\n    });\n    var handleClickButton = useCallback(function (event) {\n        // This prevents ghost click.\n        event.preventDefault();\n        setOpen(true);\n        anchorEl.current = event.currentTarget;\n    }, [anchorEl, setOpen]);\n    var handleRequestClose = useCallback(function () {\n        setOpen(false);\n    }, [setOpen]);\n    var handleShow = useCallback(function (_a) {\n        var source = _a.source, defaultValue = _a.defaultValue;\n        showFilter(source, defaultValue);\n        setOpen(false);\n    }, [showFilter, setOpen]);\n    if (hiddenFilters.length === 0)\n        return null;\n    return (React.createElement(\"div\", __assign({ className: classnames(classes.root, className) }, rest),\n        React.createElement(Button, { className: \"add-filter\", label: \"ra.action.add_filter\", onClick: handleClickButton },\n            React.createElement(ContentFilter, null)),\n        React.createElement(Menu, { open: open, anchorEl: anchorEl.current, onClose: handleRequestClose }, hiddenFilters.map(function (filterElement) { return (React.createElement(FilterButtonMenuItem, { key: filterElement.props.source, filter: filterElement, resource: resource, onShow: handleShow })); }))));\n};\nFilterButton.propTypes = {\n    resource: PropTypes.string.isRequired,\n    filters: PropTypes.arrayOf(PropTypes.node).isRequired,\n    displayedFilters: PropTypes.object,\n    filterValues: PropTypes.object.isRequired,\n    showFilter: PropTypes.func.isRequired,\n    classes: PropTypes.object,\n    className: PropTypes.string,\n};\nexport default FilterButton;\n"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import { useNotify, useRedirect, useRefresh, useUnselectAll } from '../sideEffect';\nimport { useMemo } from 'react';\n\nvar useDeclarativeSideEffects = function () {\n  var notify = useNotify();\n  var redirect = useRedirect();\n  var refresh = useRefresh();\n  var unselectAll = useUnselectAll();\n  return useMemo(function () {\n    return function (resource, _a) {\n      var _b = _a === void 0 ? {\n        onSuccess: undefined,\n        onFailure: undefined\n      } : _a,\n          onSuccess = _b.onSuccess,\n          onFailure = _b.onFailure;\n\n      var convertToFunctionSideEffect = function (resource, sideEffects) {\n        if (!sideEffects || typeof sideEffects === 'function') {\n          return sideEffects;\n        }\n\n        if (Object.keys(sideEffects).length === 0) {\n          return undefined;\n        }\n\n        var notification = sideEffects.notification,\n            redirectTo = sideEffects.redirectTo,\n            needRefresh = sideEffects.refresh,\n            needUnselectAll = sideEffects.unselectAll;\n        return function () {\n          if (notification) {\n            notify(notification.body, notification.level, notification.messageArgs);\n          }\n\n          if (redirectTo) {\n            redirect(redirectTo);\n          }\n\n          if (needRefresh) {\n            refresh();\n          }\n\n          if (needUnselectAll) {\n            unselectAll(resource);\n          }\n        };\n      };\n\n      return {\n        onSuccess: convertToFunctionSideEffect(resource, onSuccess),\n        onFailure: convertToFunctionSideEffect(resource, onFailure)\n      };\n    };\n  }, [notify, redirect, refresh, unselectAll]);\n};\n\nexport default useDeclarativeSideEffects;","map":{"version":3,"sources":["/node_modules/ra-core/esm/dataProvider/useDeclarativeSideEffects.js"],"names":["useNotify","useRedirect","useRefresh","useUnselectAll","useMemo","useDeclarativeSideEffects","notify","redirect","refresh","unselectAll","resource","_a","_b","onSuccess","undefined","onFailure","convertToFunctionSideEffect","sideEffects","Object","keys","length","notification","redirectTo","needRefresh","needUnselectAll","body","level","messageArgs"],"mappings":"AAAA,SAASA,SAAT,EAAoBC,WAApB,EAAiCC,UAAjC,EAA6CC,cAA7C,QAAoE,eAApE;AACA,SAASC,OAAT,QAAwB,OAAxB;;AACA,IAAIC,yBAAyB,GAAG,YAAY;AACxC,MAAIC,MAAM,GAAGN,SAAS,EAAtB;AACA,MAAIO,QAAQ,GAAGN,WAAW,EAA1B;AACA,MAAIO,OAAO,GAAGN,UAAU,EAAxB;AACA,MAAIO,WAAW,GAAGN,cAAc,EAAhC;AACA,SAAOC,OAAO,CAAC,YAAY;AAAE,WAAO,UAAUM,QAAV,EAAoBC,EAApB,EAAwB;AACxD,UAAIC,EAAE,GAAGD,EAAE,KAAK,KAAK,CAAZ,GAAgB;AACrBE,QAAAA,SAAS,EAAEC,SADU;AAErBC,QAAAA,SAAS,EAAED;AAFU,OAAhB,GAGLH,EAHJ;AAAA,UAGQE,SAAS,GAAGD,EAAE,CAACC,SAHvB;AAAA,UAGkCE,SAAS,GAAGH,EAAE,CAACG,SAHjD;;AAIA,UAAIC,2BAA2B,GAAG,UAAUN,QAAV,EAAoBO,WAApB,EAAiC;AAC/D,YAAI,CAACA,WAAD,IAAgB,OAAOA,WAAP,KAAuB,UAA3C,EAAuD;AACnD,iBAAOA,WAAP;AACH;;AACD,YAAIC,MAAM,CAACC,IAAP,CAAYF,WAAZ,EAAyBG,MAAzB,KAAoC,CAAxC,EAA2C;AACvC,iBAAON,SAAP;AACH;;AACD,YAAIO,YAAY,GAAGJ,WAAW,CAACI,YAA/B;AAAA,YAA6CC,UAAU,GAAGL,WAAW,CAACK,UAAtE;AAAA,YAAkFC,WAAW,GAAGN,WAAW,CAACT,OAA5G;AAAA,YAAqHgB,eAAe,GAAGP,WAAW,CAACR,WAAnJ;AACA,eAAO,YAAY;AACf,cAAIY,YAAJ,EAAkB;AACdf,YAAAA,MAAM,CAACe,YAAY,CAACI,IAAd,EAAoBJ,YAAY,CAACK,KAAjC,EAAwCL,YAAY,CAACM,WAArD,CAAN;AACH;;AACD,cAAIL,UAAJ,EAAgB;AACZf,YAAAA,QAAQ,CAACe,UAAD,CAAR;AACH;;AACD,cAAIC,WAAJ,EAAiB;AACbf,YAAAA,OAAO;AACV;;AACD,cAAIgB,eAAJ,EAAqB;AACjBf,YAAAA,WAAW,CAACC,QAAD,CAAX;AACH;AACJ,SAbD;AAcH,OAtBD;;AAuBA,aAAO;AACHG,QAAAA,SAAS,EAAEG,2BAA2B,CAACN,QAAD,EAAWG,SAAX,CADnC;AAEHE,QAAAA,SAAS,EAAEC,2BAA2B,CAACN,QAAD,EAAWK,SAAX;AAFnC,OAAP;AAIH,KAhC4B;AAgCzB,GAhCU,EAgCR,CAACT,MAAD,EAASC,QAAT,EAAmBC,OAAnB,EAA4BC,WAA5B,CAhCQ,CAAd;AAiCH,CAtCD;;AAuCA,eAAeJ,yBAAf","sourcesContent":["import { useNotify, useRedirect, useRefresh, useUnselectAll, } from '../sideEffect';\nimport { useMemo } from 'react';\nvar useDeclarativeSideEffects = function () {\n    var notify = useNotify();\n    var redirect = useRedirect();\n    var refresh = useRefresh();\n    var unselectAll = useUnselectAll();\n    return useMemo(function () { return function (resource, _a) {\n        var _b = _a === void 0 ? {\n            onSuccess: undefined,\n            onFailure: undefined,\n        } : _a, onSuccess = _b.onSuccess, onFailure = _b.onFailure;\n        var convertToFunctionSideEffect = function (resource, sideEffects) {\n            if (!sideEffects || typeof sideEffects === 'function') {\n                return sideEffects;\n            }\n            if (Object.keys(sideEffects).length === 0) {\n                return undefined;\n            }\n            var notification = sideEffects.notification, redirectTo = sideEffects.redirectTo, needRefresh = sideEffects.refresh, needUnselectAll = sideEffects.unselectAll;\n            return function () {\n                if (notification) {\n                    notify(notification.body, notification.level, notification.messageArgs);\n                }\n                if (redirectTo) {\n                    redirect(redirectTo);\n                }\n                if (needRefresh) {\n                    refresh();\n                }\n                if (needUnselectAll) {\n                    unselectAll(resource);\n                }\n            };\n        };\n        return {\n            onSuccess: convertToFunctionSideEffect(resource, onSuccess),\n            onFailure: convertToFunctionSideEffect(resource, onFailure),\n        };\n    }; }, [notify, redirect, refresh, unselectAll]);\n};\nexport default useDeclarativeSideEffects;\n"]},"metadata":{},"sourceType":"module"}
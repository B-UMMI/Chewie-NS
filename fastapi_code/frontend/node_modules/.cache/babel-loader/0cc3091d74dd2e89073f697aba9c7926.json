{"ast":null,"code":"import { useContext, useCallback } from 'react';\nimport { TranslationContext } from './TranslationContext';\nimport { useUpdateLoading } from '../loading';\nimport { useNotify } from '../sideEffect';\n/**\n * Set the current locale using the TranslationContext\n *\n * This hook rerenders when the locale changes.\n *\n * @example\n *\n * import { useSetLocale } from 'react-admin';\n *\n * const availableLanguages = {\n *     en: 'English',\n *     fr: 'Français',\n * }\n * const LanguageSwitcher = () => {\n *     const setLocale = useSetLocale();\n *     return (\n *         <ul>{\n *             Object.keys(availableLanguages).map(locale => {\n *                  <li key={locale} onClick={() => setLocale(locale)}>\n *                      {availableLanguages[locale]}\n *                  </li>\n *              })\n *         }</ul>\n *     );\n * }\n */\n\nvar useSetLocale = function () {\n  var _a = useContext(TranslationContext),\n      setLocale = _a.setLocale,\n      i18nProvider = _a.i18nProvider;\n\n  var _b = useUpdateLoading(),\n      startLoading = _b.startLoading,\n      stopLoading = _b.stopLoading;\n\n  var notify = useNotify();\n  return useCallback(function (newLocale) {\n    return new Promise(function (resolve) {\n      startLoading(); // so we systematically return a Promise for the messages\n      // i18nProvider may return a Promise for language changes,\n\n      resolve(i18nProvider.changeLocale(newLocale));\n    }).then(function () {\n      stopLoading();\n      setLocale(newLocale);\n    }).catch(function (error) {\n      stopLoading();\n      notify('ra.notification.i18n_error', 'warning');\n      console.error(error);\n    });\n  }, [i18nProvider, notify, setLocale, startLoading, stopLoading]);\n};\n\nexport default useSetLocale;","map":{"version":3,"sources":["/node_modules/ra-core/esm/i18n/useSetLocale.js"],"names":["useContext","useCallback","TranslationContext","useUpdateLoading","useNotify","useSetLocale","_a","setLocale","i18nProvider","_b","startLoading","stopLoading","notify","newLocale","Promise","resolve","changeLocale","then","catch","error","console"],"mappings":"AAAA,SAASA,UAAT,EAAqBC,WAArB,QAAwC,OAAxC;AACA,SAASC,kBAAT,QAAmC,sBAAnC;AACA,SAASC,gBAAT,QAAiC,YAAjC;AACA,SAASC,SAAT,QAA0B,eAA1B;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0BA,IAAIC,YAAY,GAAG,YAAY;AAC3B,MAAIC,EAAE,GAAGN,UAAU,CAACE,kBAAD,CAAnB;AAAA,MAAyCK,SAAS,GAAGD,EAAE,CAACC,SAAxD;AAAA,MAAmEC,YAAY,GAAGF,EAAE,CAACE,YAArF;;AACA,MAAIC,EAAE,GAAGN,gBAAgB,EAAzB;AAAA,MAA6BO,YAAY,GAAGD,EAAE,CAACC,YAA/C;AAAA,MAA6DC,WAAW,GAAGF,EAAE,CAACE,WAA9E;;AACA,MAAIC,MAAM,GAAGR,SAAS,EAAtB;AACA,SAAOH,WAAW,CAAC,UAAUY,SAAV,EAAqB;AACpC,WAAO,IAAIC,OAAJ,CAAY,UAAUC,OAAV,EAAmB;AAClCL,MAAAA,YAAY,GADsB,CAElC;AACA;;AACAK,MAAAA,OAAO,CAACP,YAAY,CAACQ,YAAb,CAA0BH,SAA1B,CAAD,CAAP;AACH,KALM,EAMFI,IANE,CAMG,YAAY;AAClBN,MAAAA,WAAW;AACXJ,MAAAA,SAAS,CAACM,SAAD,CAAT;AACH,KATM,EAUFK,KAVE,CAUI,UAAUC,KAAV,EAAiB;AACxBR,MAAAA,WAAW;AACXC,MAAAA,MAAM,CAAC,4BAAD,EAA+B,SAA/B,CAAN;AACAQ,MAAAA,OAAO,CAACD,KAAR,CAAcA,KAAd;AACH,KAdM,CAAP;AAeH,GAhBiB,EAgBf,CAACX,YAAD,EAAeI,MAAf,EAAuBL,SAAvB,EAAkCG,YAAlC,EAAgDC,WAAhD,CAhBe,CAAlB;AAiBH,CArBD;;AAsBA,eAAeN,YAAf","sourcesContent":["import { useContext, useCallback } from 'react';\nimport { TranslationContext } from './TranslationContext';\nimport { useUpdateLoading } from '../loading';\nimport { useNotify } from '../sideEffect';\n/**\n * Set the current locale using the TranslationContext\n *\n * This hook rerenders when the locale changes.\n *\n * @example\n *\n * import { useSetLocale } from 'react-admin';\n *\n * const availableLanguages = {\n *     en: 'English',\n *     fr: 'Français',\n * }\n * const LanguageSwitcher = () => {\n *     const setLocale = useSetLocale();\n *     return (\n *         <ul>{\n *             Object.keys(availableLanguages).map(locale => {\n *                  <li key={locale} onClick={() => setLocale(locale)}>\n *                      {availableLanguages[locale]}\n *                  </li>\n *              })\n *         }</ul>\n *     );\n * }\n */\nvar useSetLocale = function () {\n    var _a = useContext(TranslationContext), setLocale = _a.setLocale, i18nProvider = _a.i18nProvider;\n    var _b = useUpdateLoading(), startLoading = _b.startLoading, stopLoading = _b.stopLoading;\n    var notify = useNotify();\n    return useCallback(function (newLocale) {\n        return new Promise(function (resolve) {\n            startLoading();\n            // so we systematically return a Promise for the messages\n            // i18nProvider may return a Promise for language changes,\n            resolve(i18nProvider.changeLocale(newLocale));\n        })\n            .then(function () {\n            stopLoading();\n            setLocale(newLocale);\n        })\n            .catch(function (error) {\n            stopLoading();\n            notify('ra.notification.i18n_error', 'warning');\n            console.error(error);\n        });\n    }, [i18nProvider, notify, setLocale, startLoading, stopLoading]);\n};\nexport default useSetLocale;\n"]},"metadata":{},"sourceType":"module"}
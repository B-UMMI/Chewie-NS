{"ast":null,"code":"import _objectWithoutPropertiesLoose from '@babel/runtime/helpers/esm/objectWithoutPropertiesLoose';\nimport _extends from '@babel/runtime/helpers/esm/extends';\nimport _assertThisInitialized from '@babel/runtime/helpers/esm/assertThisInitialized';\nimport _inheritsLoose from '@babel/runtime/helpers/esm/inheritsLoose';\nimport PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { isForwardRef } from 'react-is';\nimport computeScrollIntoView from 'compute-scroll-into-view'; // istanbul ignore next\n\nvar statusDiv = typeof document === 'undefined' ? null : document.getElementById('a11y-status-message');\nvar statuses = [];\n/**\n * @param {String} status the status message\n */\n\nfunction setStatus(status) {\n  var isSameAsLast = statuses[statuses.length - 1] === status;\n\n  if (isSameAsLast) {\n    statuses = [].concat(statuses, [status]);\n  } else {\n    statuses = [status];\n  }\n\n  var div = getStatusDiv(); // Remove previous children\n\n  while (div.lastChild) {\n    div.removeChild(div.firstChild);\n  }\n\n  statuses.filter(Boolean).forEach(function (statusItem, index) {\n    div.appendChild(getStatusChildDiv(statusItem, index));\n  });\n}\n/**\n * @param {String} status the status message\n * @param {Number} index the index\n * @return {HTMLElement} the child node\n */\n\n\nfunction getStatusChildDiv(status, index) {\n  var display = index === statuses.length - 1 ? 'block' : 'none';\n  var childDiv = document.createElement('div');\n  childDiv.style.display = display;\n  childDiv.textContent = status;\n  return childDiv;\n}\n/**\n * Get the status node or create it if it does not already exist\n * @return {HTMLElement} the status node\n */\n\n\nfunction getStatusDiv() {\n  if (statusDiv) {\n    return statusDiv;\n  }\n\n  statusDiv = document.createElement('div');\n  statusDiv.setAttribute('id', 'a11y-status-message');\n  statusDiv.setAttribute('role', 'status');\n  statusDiv.setAttribute('aria-live', 'polite');\n  statusDiv.setAttribute('aria-relevant', 'additions text');\n  Object.assign(statusDiv.style, {\n    border: '0',\n    clip: 'rect(0 0 0 0)',\n    height: '1px',\n    margin: '-1px',\n    overflow: 'hidden',\n    padding: '0',\n    position: 'absolute',\n    width: '1px'\n  });\n  document.body.appendChild(statusDiv);\n  return statusDiv;\n}\n\nvar unknown = process.env.NODE_ENV !== \"production\" ? '__autocomplete_unknown__' : 0;\nvar mouseUp = process.env.NODE_ENV !== \"production\" ? '__autocomplete_mouseup__' : 1;\nvar itemMouseEnter = process.env.NODE_ENV !== \"production\" ? '__autocomplete_item_mouseenter__' : 2;\nvar keyDownArrowUp = process.env.NODE_ENV !== \"production\" ? '__autocomplete_keydown_arrow_up__' : 3;\nvar keyDownArrowDown = process.env.NODE_ENV !== \"production\" ? '__autocomplete_keydown_arrow_down__' : 4;\nvar keyDownEscape = process.env.NODE_ENV !== \"production\" ? '__autocomplete_keydown_escape__' : 5;\nvar keyDownEnter = process.env.NODE_ENV !== \"production\" ? '__autocomplete_keydown_enter__' : 6;\nvar keyDownHome = process.env.NODE_ENV !== \"production\" ? '__autocomplete_keydown_home__' : 7;\nvar keyDownEnd = process.env.NODE_ENV !== \"production\" ? '__autocomplete_keydown_enter__' : 8;\nvar clickItem = process.env.NODE_ENV !== \"production\" ? '__autocomplete_click_item__' : 9;\nvar blurInput = process.env.NODE_ENV !== \"production\" ? '__autocomplete_blur_input__' : 10;\nvar changeInput = process.env.NODE_ENV !== \"production\" ? '__autocomplete_change_input__' : 11;\nvar keyDownSpaceButton = process.env.NODE_ENV !== \"production\" ? '__autocomplete_keydown_space_button__' : 12;\nvar clickButton = process.env.NODE_ENV !== \"production\" ? '__autocomplete_click_button__' : 13;\nvar blurButton = process.env.NODE_ENV !== \"production\" ? '__autocomplete_blur_button__' : 14;\nvar controlledPropUpdatedSelectedItem = process.env.NODE_ENV !== \"production\" ? '__autocomplete_controlled_prop_updated_selected_item__' : 15;\nvar touchEnd = process.env.NODE_ENV !== \"production\" ? '__autocomplete_touchend__' : 16;\nvar stateChangeTypes = /*#__PURE__*/Object.freeze({\n  unknown: unknown,\n  mouseUp: mouseUp,\n  itemMouseEnter: itemMouseEnter,\n  keyDownArrowUp: keyDownArrowUp,\n  keyDownArrowDown: keyDownArrowDown,\n  keyDownEscape: keyDownEscape,\n  keyDownEnter: keyDownEnter,\n  keyDownHome: keyDownHome,\n  keyDownEnd: keyDownEnd,\n  clickItem: clickItem,\n  blurInput: blurInput,\n  changeInput: changeInput,\n  keyDownSpaceButton: keyDownSpaceButton,\n  clickButton: clickButton,\n  blurButton: blurButton,\n  controlledPropUpdatedSelectedItem: controlledPropUpdatedSelectedItem,\n  touchEnd: touchEnd\n});\nvar idCounter = 0;\n/**\n * Accepts a parameter and returns it if it's a function\n * or a noop function if it's not. This allows us to\n * accept a callback, but not worry about it if it's not\n * passed.\n * @param {Function} cb the callback\n * @return {Function} a function\n */\n\nfunction cbToCb(cb) {\n  return typeof cb === 'function' ? cb : noop;\n}\n\nfunction noop() {}\n/**\n * Scroll node into view if necessary\n * @param {HTMLElement} node the element that should scroll into view\n * @param {HTMLElement} menuNode the menu element of the component\n */\n\n\nfunction scrollIntoView(node, menuNode) {\n  if (node === null) {\n    return;\n  }\n\n  var actions = computeScrollIntoView(node, {\n    boundary: menuNode,\n    block: 'nearest',\n    scrollMode: 'if-needed'\n  });\n  actions.forEach(function (_ref) {\n    var el = _ref.el,\n        top = _ref.top,\n        left = _ref.left;\n    el.scrollTop = top;\n    el.scrollLeft = left;\n  });\n}\n/**\n * @param {HTMLElement} parent the parent node\n * @param {HTMLElement} child the child node\n * @return {Boolean} whether the parent is the child or the child is in the parent\n */\n\n\nfunction isOrContainsNode(parent, child) {\n  return parent === child || parent.contains && parent.contains(child);\n}\n/**\n * Simple debounce implementation. Will call the given\n * function once after the time given has passed since\n * it was last called.\n * @param {Function} fn the function to call after the time\n * @param {Number} time the time to wait\n * @return {Function} the debounced function\n */\n\n\nfunction debounce(fn, time) {\n  var timeoutId;\n\n  function cancel() {\n    if (timeoutId) {\n      clearTimeout(timeoutId);\n    }\n  }\n\n  function wrapper() {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    cancel();\n    timeoutId = setTimeout(function () {\n      timeoutId = null;\n      fn.apply(void 0, args);\n    }, time);\n  }\n\n  wrapper.cancel = cancel;\n  return wrapper;\n}\n/**\n * This is intended to be used to compose event handlers.\n * They are executed in order until one of them sets\n * `event.preventDownshiftDefault = true`.\n * @param {...Function} fns the event handler functions\n * @return {Function} the event handler to add to an element\n */\n\n\nfunction callAllEventHandlers() {\n  for (var _len2 = arguments.length, fns = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n    fns[_key2] = arguments[_key2];\n  }\n\n  return function (event) {\n    for (var _len3 = arguments.length, args = new Array(_len3 > 1 ? _len3 - 1 : 0), _key3 = 1; _key3 < _len3; _key3++) {\n      args[_key3 - 1] = arguments[_key3];\n    }\n\n    return fns.some(function (fn) {\n      if (fn) {\n        fn.apply(void 0, [event].concat(args));\n      }\n\n      return event.preventDownshiftDefault || event.hasOwnProperty('nativeEvent') && event.nativeEvent.preventDownshiftDefault;\n    });\n  };\n}\n/**\n * This return a function that will call all the given functions with\n * the arguments with which it's called. It does a null-check before\n * attempting to call the functions and can take any number of functions.\n * @param {...Function} fns the functions to call\n * @return {Function} the function that calls all the functions\n */\n\n\nfunction callAll() {\n  for (var _len4 = arguments.length, fns = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n    fns[_key4] = arguments[_key4];\n  }\n\n  return function () {\n    for (var _len5 = arguments.length, args = new Array(_len5), _key5 = 0; _key5 < _len5; _key5++) {\n      args[_key5] = arguments[_key5];\n    }\n\n    fns.forEach(function (fn) {\n      if (fn) {\n        fn.apply(void 0, args);\n      }\n    });\n  };\n}\n/**\n * This generates a unique ID for an instance of Downshift\n * @return {String} the unique ID\n */\n\n\nfunction generateId() {\n  return String(idCounter++);\n}\n/**\n * Resets idCounter to 0. Used for SSR.\n */\n\n\nfunction resetIdCounter() {\n  idCounter = 0;\n}\n/**\n * @param {Object} param the downshift state and other relevant properties\n * @return {String} the a11y status message\n */\n\n\nfunction getA11yStatusMessage(_ref2) {\n  var isOpen = _ref2.isOpen,\n      selectedItem = _ref2.selectedItem,\n      resultCount = _ref2.resultCount,\n      previousResultCount = _ref2.previousResultCount,\n      itemToString = _ref2.itemToString;\n\n  if (!isOpen) {\n    return selectedItem ? itemToString(selectedItem) : '';\n  }\n\n  if (!resultCount) {\n    return 'No results are available.';\n  }\n\n  if (resultCount !== previousResultCount) {\n    return resultCount + \" result\" + (resultCount === 1 ? ' is' : 's are') + \" available, use up and down arrow keys to navigate. Press Enter key to select.\";\n  }\n\n  return '';\n}\n/**\n * Takes an argument and if it's an array, returns the first item in the array\n * otherwise returns the argument\n * @param {*} arg the maybe-array\n * @param {*} defaultValue the value if arg is falsey not defined\n * @return {*} the arg or it's first item\n */\n\n\nfunction unwrapArray(arg, defaultValue) {\n  arg = Array.isArray(arg) ?\n  /* istanbul ignore next (preact) */\n  arg[0] : arg;\n\n  if (!arg && defaultValue) {\n    return defaultValue;\n  } else {\n    return arg;\n  }\n}\n/**\n * @param {Object} element (P)react element\n * @return {Boolean} whether it's a DOM element\n */\n\n\nfunction isDOMElement(element) {\n  // then we assume this is react\n  return typeof element.type === 'string';\n}\n/**\n * @param {Object} element (P)react element\n * @return {Object} the props\n */\n\n\nfunction getElementProps(element) {\n  return element.props;\n}\n/**\n * Throws a helpful error message for required properties. Useful\n * to be used as a default in destructuring or object params.\n * @param {String} fnName the function name\n * @param {String} propName the prop name\n */\n\n\nfunction requiredProp(fnName, propName) {\n  // eslint-disable-next-line no-console\n  console.error(\"The property \\\"\" + propName + \"\\\" is required in \\\"\" + fnName + \"\\\"\");\n}\n\nvar stateKeys = ['highlightedIndex', 'inputValue', 'isOpen', 'selectedItem', 'type'];\n/**\n * @param {Object} state the state object\n * @return {Object} state that is relevant to downshift\n */\n\nfunction pickState(state) {\n  if (state === void 0) {\n    state = {};\n  }\n\n  var result = {};\n  stateKeys.forEach(function (k) {\n    if (state.hasOwnProperty(k)) {\n      result[k] = state[k];\n    }\n  });\n  return result;\n}\n/**\n * Normalizes the 'key' property of a KeyboardEvent in IE/Edge\n * @param {Object} event a keyboardEvent object\n * @return {String} keyboard key\n */\n\n\nfunction normalizeArrowKey(event) {\n  var key = event.key,\n      keyCode = event.keyCode;\n  /* istanbul ignore next (ie) */\n\n  if (keyCode >= 37 && keyCode <= 40 && key.indexOf('Arrow') !== 0) {\n    return \"Arrow\" + key;\n  }\n\n  return key;\n}\n/**\n * Simple check if the value passed is object literal\n * @param {*} obj any things\n * @return {Boolean} whether it's object literal\n */\n\n\nfunction isPlainObject(obj) {\n  return Object.prototype.toString.call(obj) === '[object Object]';\n}\n/**\n * Returns the new index in the list, in a circular way. If next value is out of bonds from the total,\n * it will wrap to either 0 or itemCount - 1.\n *\n * @param {number} moveAmount Number of positions to move. Negative to move backwards, positive forwards.\n * @param {number} baseIndex The initial position to move from.\n * @param {number} itemCount The total number of items.\n * @returns {number} The new index after the move.\n */\n\n\nfunction getNextWrappingIndex(moveAmount, baseIndex, itemCount) {\n  var itemsLastIndex = itemCount - 1;\n\n  if (typeof baseIndex !== 'number' || baseIndex < 0 || baseIndex >= itemCount) {\n    baseIndex = moveAmount > 0 ? -1 : itemsLastIndex + 1;\n  }\n\n  var newIndex = baseIndex + moveAmount;\n\n  if (newIndex < 0) {\n    newIndex = itemsLastIndex;\n  } else if (newIndex > itemsLastIndex) {\n    newIndex = 0;\n  }\n\n  return newIndex;\n}\n\nvar Downshift = /*#__PURE__*/function (_Component) {\n  _inheritsLoose(Downshift, _Component);\n\n  function Downshift(_props) {\n    var _this = _Component.call(this, _props) || this;\n\n    _this.id = _this.props.id || \"downshift-\" + generateId();\n    _this.menuId = _this.props.menuId || _this.id + \"-menu\";\n    _this.labelId = _this.props.labelId || _this.id + \"-label\";\n    _this.inputId = _this.props.inputId || _this.id + \"-input\";\n\n    _this.getItemId = _this.props.getItemId || function (index) {\n      return _this.id + \"-item-\" + index;\n    };\n\n    _this.input = null;\n    _this.items = [];\n    _this.itemCount = null;\n    _this.previousResultCount = 0;\n    _this.timeoutIds = [];\n\n    _this.internalSetTimeout = function (fn, time) {\n      var id = setTimeout(function () {\n        _this.timeoutIds = _this.timeoutIds.filter(function (i) {\n          return i !== id;\n        });\n        fn();\n      }, time);\n\n      _this.timeoutIds.push(id);\n    };\n\n    _this.setItemCount = function (count) {\n      _this.itemCount = count;\n    };\n\n    _this.unsetItemCount = function () {\n      _this.itemCount = null;\n    };\n\n    _this.setHighlightedIndex = function (highlightedIndex, otherStateToSet) {\n      if (highlightedIndex === void 0) {\n        highlightedIndex = _this.props.defaultHighlightedIndex;\n      }\n\n      if (otherStateToSet === void 0) {\n        otherStateToSet = {};\n      }\n\n      otherStateToSet = pickState(otherStateToSet);\n\n      _this.internalSetState(_extends({\n        highlightedIndex: highlightedIndex\n      }, otherStateToSet));\n    };\n\n    _this.clearSelection = function (cb) {\n      _this.internalSetState({\n        selectedItem: null,\n        inputValue: '',\n        highlightedIndex: _this.props.defaultHighlightedIndex,\n        isOpen: _this.props.defaultIsOpen\n      }, cb);\n    };\n\n    _this.selectItem = function (item, otherStateToSet, cb) {\n      otherStateToSet = pickState(otherStateToSet);\n\n      _this.internalSetState(_extends({\n        isOpen: _this.props.defaultIsOpen,\n        highlightedIndex: _this.props.defaultHighlightedIndex,\n        selectedItem: item,\n        inputValue: _this.props.itemToString(item)\n      }, otherStateToSet), cb);\n    };\n\n    _this.selectItemAtIndex = function (itemIndex, otherStateToSet, cb) {\n      var item = _this.items[itemIndex];\n\n      if (item == null) {\n        return;\n      }\n\n      _this.selectItem(item, otherStateToSet, cb);\n    };\n\n    _this.selectHighlightedItem = function (otherStateToSet, cb) {\n      return _this.selectItemAtIndex(_this.getState().highlightedIndex, otherStateToSet, cb);\n    };\n\n    _this.internalSetState = function (stateToSet, cb) {\n      var isItemSelected, onChangeArg;\n      var onStateChangeArg = {};\n      var isStateToSetFunction = typeof stateToSet === 'function'; // we want to call `onInputValueChange` before the `setState` call\n      // so someone controlling the `inputValue` state gets notified of\n      // the input change as soon as possible. This avoids issues with\n      // preserving the cursor position.\n      // See https://github.com/downshift-js/downshift/issues/217 for more info.\n\n      if (!isStateToSetFunction && stateToSet.hasOwnProperty('inputValue')) {\n        _this.props.onInputValueChange(stateToSet.inputValue, _extends({}, _this.getStateAndHelpers(), stateToSet));\n      }\n\n      return _this.setState(function (state) {\n        state = _this.getState(state);\n        var newStateToSet = isStateToSetFunction ? stateToSet(state) : stateToSet; // Your own function that could modify the state that will be set.\n\n        newStateToSet = _this.props.stateReducer(state, newStateToSet); // checks if an item is selected, regardless of if it's different from\n        // what was selected before\n        // used to determine if onSelect and onChange callbacks should be called\n\n        isItemSelected = newStateToSet.hasOwnProperty('selectedItem'); // this keeps track of the object we want to call with setState\n\n        var nextState = {}; // this is just used to tell whether the state changed\n\n        var nextFullState = {}; // we need to call on change if the outside world is controlling any of our state\n        // and we're trying to update that state. OR if the selection has changed and we're\n        // trying to update the selection\n\n        if (isItemSelected && newStateToSet.selectedItem !== state.selectedItem) {\n          onChangeArg = newStateToSet.selectedItem;\n        }\n\n        newStateToSet.type = newStateToSet.type || unknown;\n        Object.keys(newStateToSet).forEach(function (key) {\n          // onStateChangeArg should only have the state that is\n          // actually changing\n          if (state[key] !== newStateToSet[key]) {\n            onStateChangeArg[key] = newStateToSet[key];\n          } // the type is useful for the onStateChangeArg\n          // but we don't actually want to set it in internal state.\n          // this is an undocumented feature for now... Not all internalSetState\n          // calls support it and I'm not certain we want them to yet.\n          // But it enables users controlling the isOpen state to know when\n          // the isOpen state changes due to mouseup events which is quite handy.\n\n\n          if (key === 'type') {\n            return;\n          }\n\n          nextFullState[key] = newStateToSet[key]; // if it's coming from props, then we don't care to set it internally\n\n          if (!_this.isControlledProp(key)) {\n            nextState[key] = newStateToSet[key];\n          }\n        }); // if stateToSet is a function, then we weren't able to call onInputValueChange\n        // earlier, so we'll call it now that we know what the inputValue state will be.\n\n        if (isStateToSetFunction && newStateToSet.hasOwnProperty('inputValue')) {\n          _this.props.onInputValueChange(newStateToSet.inputValue, _extends({}, _this.getStateAndHelpers(), newStateToSet));\n        }\n\n        return nextState;\n      }, function () {\n        // call the provided callback if it's a function\n        cbToCb(cb)(); // only call the onStateChange and onChange callbacks if\n        // we have relevant information to pass them.\n\n        var hasMoreStateThanType = Object.keys(onStateChangeArg).length > 1;\n\n        if (hasMoreStateThanType) {\n          _this.props.onStateChange(onStateChangeArg, _this.getStateAndHelpers());\n        }\n\n        if (isItemSelected) {\n          _this.props.onSelect(stateToSet.selectedItem, _this.getStateAndHelpers());\n        }\n\n        if (onChangeArg !== undefined) {\n          _this.props.onChange(onChangeArg, _this.getStateAndHelpers());\n        } // this is currently undocumented and therefore subject to change\n        // We'll try to not break it, but just be warned.\n\n\n        _this.props.onUserAction(onStateChangeArg, _this.getStateAndHelpers());\n      });\n    };\n\n    _this.rootRef = function (node) {\n      return _this._rootNode = node;\n    };\n\n    _this.getRootProps = function (_temp, _temp2) {\n      var _extends2;\n\n      var _ref = _temp === void 0 ? {} : _temp,\n          _ref$refKey = _ref.refKey,\n          refKey = _ref$refKey === void 0 ? 'ref' : _ref$refKey,\n          rest = _objectWithoutPropertiesLoose(_ref, [\"refKey\"]);\n\n      var _ref2 = _temp2 === void 0 ? {} : _temp2,\n          _ref2$suppressRefErro = _ref2.suppressRefError,\n          suppressRefError = _ref2$suppressRefErro === void 0 ? false : _ref2$suppressRefErro; // this is used in the render to know whether the user has called getRootProps.\n      // It uses that to know whether to apply the props automatically\n\n\n      _this.getRootProps.called = true;\n      _this.getRootProps.refKey = refKey;\n      _this.getRootProps.suppressRefError = suppressRefError;\n\n      var _this$getState = _this.getState(),\n          isOpen = _this$getState.isOpen;\n\n      return _extends((_extends2 = {}, _extends2[refKey] = _this.rootRef, _extends2.role = 'combobox', _extends2['aria-expanded'] = isOpen, _extends2['aria-haspopup'] = 'listbox', _extends2['aria-owns'] = isOpen ? _this.menuId : null, _extends2['aria-labelledby'] = _this.labelId, _extends2), rest);\n    };\n\n    _this.keyDownHandlers = {\n      ArrowDown: function ArrowDown(event) {\n        var _this2 = this;\n\n        event.preventDefault();\n\n        if (this.getState().isOpen) {\n          var amount = event.shiftKey ? 5 : 1;\n          this.moveHighlightedIndex(amount, {\n            type: keyDownArrowDown\n          });\n        } else {\n          this.internalSetState({\n            isOpen: true,\n            type: keyDownArrowDown\n          }, function () {\n            var itemCount = _this2.getItemCount();\n\n            if (itemCount > 0) {\n              _this2.setHighlightedIndex(getNextWrappingIndex(1, _this2.getState().highlightedIndex, itemCount), {\n                type: keyDownArrowDown\n              });\n            }\n          });\n        }\n      },\n      ArrowUp: function ArrowUp(event) {\n        var _this3 = this;\n\n        event.preventDefault();\n\n        if (this.getState().isOpen) {\n          var amount = event.shiftKey ? -5 : -1;\n          this.moveHighlightedIndex(amount, {\n            type: keyDownArrowUp\n          });\n        } else {\n          this.internalSetState({\n            isOpen: true,\n            type: keyDownArrowUp\n          }, function () {\n            var itemCount = _this3.getItemCount();\n\n            if (itemCount > 0) {\n              _this3.setHighlightedIndex(getNextWrappingIndex(-1, _this3.getState().highlightedIndex, itemCount), {\n                type: keyDownArrowDown\n              });\n            }\n          });\n        }\n      },\n      Enter: function Enter(event) {\n        var _this$getState2 = this.getState(),\n            isOpen = _this$getState2.isOpen,\n            highlightedIndex = _this$getState2.highlightedIndex;\n\n        if (isOpen && highlightedIndex != null) {\n          event.preventDefault();\n          var item = this.items[highlightedIndex];\n          var itemNode = this.getItemNodeFromIndex(highlightedIndex);\n\n          if (item == null || itemNode && itemNode.hasAttribute('disabled')) {\n            return;\n          }\n\n          this.selectHighlightedItem({\n            type: keyDownEnter\n          });\n        }\n      },\n      Escape: function Escape(event) {\n        event.preventDefault();\n        this.reset({\n          type: keyDownEscape\n        });\n      }\n    };\n    _this.buttonKeyDownHandlers = _extends({}, _this.keyDownHandlers, {\n      ' ': function _(event) {\n        event.preventDefault();\n        this.toggleMenu({\n          type: keyDownSpaceButton\n        });\n      }\n    });\n    _this.inputKeyDownHandlers = _extends({}, _this.keyDownHandlers, {\n      Home: function Home(event) {\n        this.highlightFirstOrLastIndex(event, true, {\n          type: keyDownHome\n        });\n      },\n      End: function End(event) {\n        this.highlightFirstOrLastIndex(event, false, {\n          type: keyDownEnd\n        });\n      }\n    });\n\n    _this.getToggleButtonProps = function (_temp3) {\n      var _ref3 = _temp3 === void 0 ? {} : _temp3,\n          onClick = _ref3.onClick,\n          onPress = _ref3.onPress,\n          onKeyDown = _ref3.onKeyDown,\n          onKeyUp = _ref3.onKeyUp,\n          onBlur = _ref3.onBlur,\n          rest = _objectWithoutPropertiesLoose(_ref3, [\"onClick\", \"onPress\", \"onKeyDown\", \"onKeyUp\", \"onBlur\"]);\n\n      var _this$getState3 = _this.getState(),\n          isOpen = _this$getState3.isOpen;\n\n      var enabledEventHandlers = {\n        onClick: callAllEventHandlers(onClick, _this.buttonHandleClick),\n        onKeyDown: callAllEventHandlers(onKeyDown, _this.buttonHandleKeyDown),\n        onKeyUp: callAllEventHandlers(onKeyUp, _this.buttonHandleKeyUp),\n        onBlur: callAllEventHandlers(onBlur, _this.buttonHandleBlur)\n      };\n      var eventHandlers = rest.disabled ? {} : enabledEventHandlers;\n      return _extends({\n        type: 'button',\n        role: 'button',\n        'aria-label': isOpen ? 'close menu' : 'open menu',\n        'aria-haspopup': true,\n        'data-toggle': true\n      }, eventHandlers, rest);\n    };\n\n    _this.buttonHandleKeyUp = function (event) {\n      // Prevent click event from emitting in Firefox\n      event.preventDefault();\n    };\n\n    _this.buttonHandleKeyDown = function (event) {\n      var key = normalizeArrowKey(event);\n\n      if (_this.buttonKeyDownHandlers[key]) {\n        _this.buttonKeyDownHandlers[key].call(_assertThisInitialized(_this), event);\n      }\n    };\n\n    _this.buttonHandleClick = function (event) {\n      event.preventDefault(); // handle odd case for Safari and Firefox which\n      // don't give the button the focus properly.\n\n      /* istanbul ignore if (can't reasonably test this) */\n\n      if (_this.props.environment.document.activeElement === _this.props.environment.document.body) {\n        event.target.focus();\n      } // to simplify testing components that use downshift, we'll not wrap this in a setTimeout\n      // if the NODE_ENV is test. With the proper build system, this should be dead code eliminated\n      // when building for production and should therefore have no impact on production code.\n\n\n      if (process.env.NODE_ENV === 'test') {\n        _this.toggleMenu({\n          type: clickButton\n        });\n      } else {\n        // Ensure that toggle of menu occurs after the potential blur event in iOS\n        _this.internalSetTimeout(function () {\n          return _this.toggleMenu({\n            type: clickButton\n          });\n        });\n      }\n    };\n\n    _this.buttonHandleBlur = function (event) {\n      var blurTarget = event.target; // Save blur target for comparison with activeElement later\n      // Need setTimeout, so that when the user presses Tab, the activeElement is the next focused element, not body element\n\n      _this.internalSetTimeout(function () {\n        if (!_this.isMouseDown && (_this.props.environment.document.activeElement == null || _this.props.environment.document.activeElement.id !== _this.inputId) && _this.props.environment.document.activeElement !== blurTarget // Do nothing if we refocus the same element again (to solve issue in Safari on iOS)\n        ) {\n            _this.reset({\n              type: blurButton\n            });\n          }\n      });\n    };\n\n    _this.getLabelProps = function (props) {\n      return _extends({\n        htmlFor: _this.inputId,\n        id: _this.labelId\n      }, props);\n    };\n\n    _this.getInputProps = function (_temp4) {\n      var _ref4 = _temp4 === void 0 ? {} : _temp4,\n          onKeyDown = _ref4.onKeyDown,\n          onBlur = _ref4.onBlur,\n          onChange = _ref4.onChange,\n          onInput = _ref4.onInput,\n          onChangeText = _ref4.onChangeText,\n          rest = _objectWithoutPropertiesLoose(_ref4, [\"onKeyDown\", \"onBlur\", \"onChange\", \"onInput\", \"onChangeText\"]);\n\n      var onChangeKey;\n      var eventHandlers = {};\n      /* istanbul ignore next (preact) */\n\n      onChangeKey = 'onChange';\n\n      var _this$getState4 = _this.getState(),\n          inputValue = _this$getState4.inputValue,\n          isOpen = _this$getState4.isOpen,\n          highlightedIndex = _this$getState4.highlightedIndex;\n\n      if (!rest.disabled) {\n        var _eventHandlers;\n\n        eventHandlers = (_eventHandlers = {}, _eventHandlers[onChangeKey] = callAllEventHandlers(onChange, onInput, _this.inputHandleChange), _eventHandlers.onKeyDown = callAllEventHandlers(onKeyDown, _this.inputHandleKeyDown), _eventHandlers.onBlur = callAllEventHandlers(onBlur, _this.inputHandleBlur), _eventHandlers);\n      }\n      /* istanbul ignore if (react-native) */\n\n\n      return _extends({\n        'aria-autocomplete': 'list',\n        'aria-activedescendant': isOpen && typeof highlightedIndex === 'number' && highlightedIndex >= 0 ? _this.getItemId(highlightedIndex) : null,\n        'aria-controls': isOpen ? _this.menuId : null,\n        'aria-labelledby': _this.labelId,\n        // https://developer.mozilla.org/en-US/docs/Web/Security/Securing_your_site/Turning_off_form_autocompletion\n        // revert back since autocomplete=\"nope\" is ignored on latest Chrome and Opera\n        autoComplete: 'off',\n        value: inputValue,\n        id: _this.inputId\n      }, eventHandlers, rest);\n    };\n\n    _this.inputHandleKeyDown = function (event) {\n      var key = normalizeArrowKey(event);\n\n      if (key && _this.inputKeyDownHandlers[key]) {\n        _this.inputKeyDownHandlers[key].call(_assertThisInitialized(_this), event);\n      }\n    };\n\n    _this.inputHandleChange = function (event) {\n      _this.internalSetState({\n        type: changeInput,\n        isOpen: true,\n        inputValue: event.target.value,\n        highlightedIndex: _this.props.defaultHighlightedIndex\n      });\n    };\n\n    _this.inputHandleTextChange\n    /* istanbul ignore next (react-native) */\n    = function (text) {\n      _this.internalSetState({\n        type: changeInput,\n        isOpen: true,\n        inputValue: text,\n        highlightedIndex: _this.props.defaultHighlightedIndex\n      });\n    };\n\n    _this.inputHandleBlur = function () {\n      // Need setTimeout, so that when the user presses Tab, the activeElement is the next focused element, not the body element\n      _this.internalSetTimeout(function () {\n        var downshiftButtonIsActive = _this.props.environment.document && !!_this.props.environment.document.activeElement && !!_this.props.environment.document.activeElement.dataset && _this.props.environment.document.activeElement.dataset.toggle && _this._rootNode && _this._rootNode.contains(_this.props.environment.document.activeElement);\n\n        if (!_this.isMouseDown && !downshiftButtonIsActive) {\n          _this.reset({\n            type: blurInput\n          });\n        }\n      });\n    };\n\n    _this.menuRef = function (node) {\n      _this._menuNode = node;\n    };\n\n    _this.getMenuProps = function (_temp5, _temp6) {\n      var _extends3;\n\n      var _ref5 = _temp5 === void 0 ? {} : _temp5,\n          _ref5$refKey = _ref5.refKey,\n          refKey = _ref5$refKey === void 0 ? 'ref' : _ref5$refKey,\n          ref = _ref5.ref,\n          props = _objectWithoutPropertiesLoose(_ref5, [\"refKey\", \"ref\"]);\n\n      var _ref6 = _temp6 === void 0 ? {} : _temp6,\n          _ref6$suppressRefErro = _ref6.suppressRefError,\n          suppressRefError = _ref6$suppressRefErro === void 0 ? false : _ref6$suppressRefErro;\n\n      _this.getMenuProps.called = true;\n      _this.getMenuProps.refKey = refKey;\n      _this.getMenuProps.suppressRefError = suppressRefError;\n      return _extends((_extends3 = {}, _extends3[refKey] = callAll(ref, _this.menuRef), _extends3.role = 'listbox', _extends3['aria-labelledby'] = props && props['aria-label'] ? null : _this.labelId, _extends3.id = _this.menuId, _extends3), props);\n    };\n\n    _this.getItemProps = function (_temp7) {\n      var _enabledEventHandlers;\n\n      var _ref7 = _temp7 === void 0 ? {} : _temp7,\n          onMouseMove = _ref7.onMouseMove,\n          onMouseDown = _ref7.onMouseDown,\n          onClick = _ref7.onClick,\n          onPress = _ref7.onPress,\n          index = _ref7.index,\n          _ref7$item = _ref7.item,\n          item = _ref7$item === void 0 ? process.env.NODE_ENV === 'production' ?\n      /* istanbul ignore next */\n      undefined : requiredProp('getItemProps', 'item') : _ref7$item,\n          rest = _objectWithoutPropertiesLoose(_ref7, [\"onMouseMove\", \"onMouseDown\", \"onClick\", \"onPress\", \"index\", \"item\"]);\n\n      if (index === undefined) {\n        _this.items.push(item);\n\n        index = _this.items.indexOf(item);\n      } else {\n        _this.items[index] = item;\n      }\n\n      var onSelectKey = 'onClick';\n      var customClickHandler = onClick;\n      var enabledEventHandlers = (_enabledEventHandlers = {\n        // onMouseMove is used over onMouseEnter here. onMouseMove\n        // is only triggered on actual mouse movement while onMouseEnter\n        // can fire on DOM changes, interrupting keyboard navigation\n        onMouseMove: callAllEventHandlers(onMouseMove, function () {\n          if (index === _this.getState().highlightedIndex) {\n            return;\n          }\n\n          _this.setHighlightedIndex(index, {\n            type: itemMouseEnter\n          }); // We never want to manually scroll when changing state based\n          // on `onMouseMove` because we will be moving the element out\n          // from under the user which is currently scrolling/moving the\n          // cursor\n\n\n          _this.avoidScrolling = true;\n\n          _this.internalSetTimeout(function () {\n            return _this.avoidScrolling = false;\n          }, 250);\n        }),\n        onMouseDown: callAllEventHandlers(onMouseDown, function (event) {\n          // This prevents the activeElement from being changed\n          // to the item so it can remain with the current activeElement\n          // which is a more common use case.\n          event.preventDefault();\n        })\n      }, _enabledEventHandlers[onSelectKey] = callAllEventHandlers(customClickHandler, function () {\n        _this.selectItemAtIndex(index, {\n          type: clickItem\n        });\n      }), _enabledEventHandlers); // Passing down the onMouseDown handler to prevent redirect\n      // of the activeElement if clicking on disabled items\n\n      var eventHandlers = rest.disabled ? {\n        onMouseDown: enabledEventHandlers.onMouseDown\n      } : enabledEventHandlers;\n      return _extends({\n        id: _this.getItemId(index),\n        role: 'option',\n        'aria-selected': _this.getState().highlightedIndex === index\n      }, eventHandlers, rest);\n    };\n\n    _this.clearItems = function () {\n      _this.items = [];\n    };\n\n    _this.reset = function (otherStateToSet, cb) {\n      if (otherStateToSet === void 0) {\n        otherStateToSet = {};\n      }\n\n      otherStateToSet = pickState(otherStateToSet);\n\n      _this.internalSetState(function (_ref8) {\n        var selectedItem = _ref8.selectedItem;\n        return _extends({\n          isOpen: _this.props.defaultIsOpen,\n          highlightedIndex: _this.props.defaultHighlightedIndex,\n          inputValue: _this.props.itemToString(selectedItem)\n        }, otherStateToSet);\n      }, cb);\n    };\n\n    _this.toggleMenu = function (otherStateToSet, cb) {\n      if (otherStateToSet === void 0) {\n        otherStateToSet = {};\n      }\n\n      otherStateToSet = pickState(otherStateToSet);\n\n      _this.internalSetState(function (_ref9) {\n        var isOpen = _ref9.isOpen;\n        return _extends({\n          isOpen: !isOpen\n        }, isOpen && {\n          highlightedIndex: _this.props.defaultHighlightedIndex\n        }, otherStateToSet);\n      }, function () {\n        var _this$getState5 = _this.getState(),\n            isOpen = _this$getState5.isOpen,\n            highlightedIndex = _this$getState5.highlightedIndex;\n\n        if (isOpen) {\n          if (_this.getItemCount() > 0 && typeof highlightedIndex === 'number') {\n            _this.setHighlightedIndex(highlightedIndex, otherStateToSet);\n          }\n        }\n\n        cbToCb(cb)();\n      });\n    };\n\n    _this.openMenu = function (cb) {\n      _this.internalSetState({\n        isOpen: true\n      }, cb);\n    };\n\n    _this.closeMenu = function (cb) {\n      _this.internalSetState({\n        isOpen: false\n      }, cb);\n    };\n\n    _this.updateStatus = debounce(function () {\n      var state = _this.getState();\n\n      var item = _this.items[state.highlightedIndex];\n\n      var resultCount = _this.getItemCount();\n\n      var status = _this.props.getA11yStatusMessage(_extends({\n        itemToString: _this.props.itemToString,\n        previousResultCount: _this.previousResultCount,\n        resultCount: resultCount,\n        highlightedItem: item\n      }, state));\n\n      _this.previousResultCount = resultCount;\n      setStatus(status);\n    }, 200); // fancy destructuring + defaults + aliases\n    // this basically says each value of state should either be set to\n    // the initial value or the default value if the initial value is not provided\n\n    var _this$props = _this.props,\n        defaultHighlightedIndex = _this$props.defaultHighlightedIndex,\n        _this$props$initialHi = _this$props.initialHighlightedIndex,\n        _highlightedIndex = _this$props$initialHi === void 0 ? defaultHighlightedIndex : _this$props$initialHi,\n        defaultIsOpen = _this$props.defaultIsOpen,\n        _this$props$initialIs = _this$props.initialIsOpen,\n        _isOpen = _this$props$initialIs === void 0 ? defaultIsOpen : _this$props$initialIs,\n        _this$props$initialIn = _this$props.initialInputValue,\n        _inputValue = _this$props$initialIn === void 0 ? '' : _this$props$initialIn,\n        _this$props$initialSe = _this$props.initialSelectedItem,\n        _selectedItem = _this$props$initialSe === void 0 ? null : _this$props$initialSe;\n\n    var _state = _this.getState({\n      highlightedIndex: _highlightedIndex,\n      isOpen: _isOpen,\n      inputValue: _inputValue,\n      selectedItem: _selectedItem\n    });\n\n    if (_state.selectedItem != null && _this.props.initialInputValue === undefined) {\n      _state.inputValue = _this.props.itemToString(_state.selectedItem);\n    }\n\n    _this.state = _state;\n    return _this;\n  }\n\n  var _proto = Downshift.prototype;\n  /**\n   * Clear all running timeouts\n   */\n\n  _proto.internalClearTimeouts = function internalClearTimeouts() {\n    this.timeoutIds.forEach(function (id) {\n      clearTimeout(id);\n    });\n    this.timeoutIds = [];\n  }\n  /**\n   * Gets the state based on internal state or props\n   * If a state value is passed via props, then that\n   * is the value given, otherwise it's retrieved from\n   * stateToMerge\n   *\n   * This will perform a shallow merge of the given state object\n   * with the state coming from props\n   * (for the controlled component scenario)\n   * This is used in state updater functions so they're referencing\n   * the right state regardless of where it comes from.\n   *\n   * @param {Object} stateToMerge defaults to this.state\n   * @return {Object} the state\n   */\n  ;\n\n  _proto.getState = function getState(stateToMerge) {\n    var _this4 = this;\n\n    if (stateToMerge === void 0) {\n      stateToMerge = this.state;\n    }\n\n    return Object.keys(stateToMerge).reduce(function (state, key) {\n      state[key] = _this4.isControlledProp(key) ? _this4.props[key] : stateToMerge[key];\n      return state;\n    }, {});\n  }\n  /**\n   * This determines whether a prop is a \"controlled prop\" meaning it is\n   * state which is controlled by the outside of this component rather\n   * than within this component.\n   * @param {String} key the key to check\n   * @return {Boolean} whether it is a controlled controlled prop\n   */\n  ;\n\n  _proto.isControlledProp = function isControlledProp(key) {\n    return this.props[key] !== undefined;\n  };\n\n  _proto.getItemCount = function getItemCount() {\n    // things read better this way. They're in priority order:\n    // 1. `this.itemCount`\n    // 2. `this.props.itemCount`\n    // 3. `this.items.length`\n    var itemCount = this.items.length;\n\n    if (this.itemCount != null) {\n      itemCount = this.itemCount;\n    } else if (this.props.itemCount !== undefined) {\n      itemCount = this.props.itemCount;\n    }\n\n    return itemCount;\n  };\n\n  _proto.getItemNodeFromIndex = function getItemNodeFromIndex(index) {\n    return this.props.environment.document.getElementById(this.getItemId(index));\n  };\n\n  _proto.scrollHighlightedItemIntoView = function scrollHighlightedItemIntoView() {\n    /* istanbul ignore else (react-native) */\n    {\n      var node = this.getItemNodeFromIndex(this.getState().highlightedIndex);\n      this.props.scrollIntoView(node, this._menuNode);\n    }\n  };\n\n  _proto.moveHighlightedIndex = function moveHighlightedIndex(amount, otherStateToSet) {\n    var itemCount = this.getItemCount();\n\n    if (itemCount > 0) {\n      var nextHighlightedIndex = getNextWrappingIndex(amount, this.getState().highlightedIndex, itemCount);\n      this.setHighlightedIndex(nextHighlightedIndex, otherStateToSet);\n    }\n  };\n\n  _proto.highlightFirstOrLastIndex = function highlightFirstOrLastIndex(event, first, otherStateToSet) {\n    var itemsLastIndex = this.getItemCount() - 1;\n\n    if (itemsLastIndex < 0 || !this.getState().isOpen) {\n      return;\n    }\n\n    event.preventDefault();\n    this.setHighlightedIndex(first ? 0 : itemsLastIndex, otherStateToSet);\n  };\n\n  _proto.getStateAndHelpers = function getStateAndHelpers() {\n    var _this$getState6 = this.getState(),\n        highlightedIndex = _this$getState6.highlightedIndex,\n        inputValue = _this$getState6.inputValue,\n        selectedItem = _this$getState6.selectedItem,\n        isOpen = _this$getState6.isOpen;\n\n    var itemToString = this.props.itemToString;\n    var id = this.id;\n    var getRootProps = this.getRootProps,\n        getToggleButtonProps = this.getToggleButtonProps,\n        getLabelProps = this.getLabelProps,\n        getMenuProps = this.getMenuProps,\n        getInputProps = this.getInputProps,\n        getItemProps = this.getItemProps,\n        openMenu = this.openMenu,\n        closeMenu = this.closeMenu,\n        toggleMenu = this.toggleMenu,\n        selectItem = this.selectItem,\n        selectItemAtIndex = this.selectItemAtIndex,\n        selectHighlightedItem = this.selectHighlightedItem,\n        setHighlightedIndex = this.setHighlightedIndex,\n        clearSelection = this.clearSelection,\n        clearItems = this.clearItems,\n        reset = this.reset,\n        setItemCount = this.setItemCount,\n        unsetItemCount = this.unsetItemCount,\n        setState = this.internalSetState;\n    return {\n      // prop getters\n      getRootProps: getRootProps,\n      getToggleButtonProps: getToggleButtonProps,\n      getLabelProps: getLabelProps,\n      getMenuProps: getMenuProps,\n      getInputProps: getInputProps,\n      getItemProps: getItemProps,\n      // actions\n      reset: reset,\n      openMenu: openMenu,\n      closeMenu: closeMenu,\n      toggleMenu: toggleMenu,\n      selectItem: selectItem,\n      selectItemAtIndex: selectItemAtIndex,\n      selectHighlightedItem: selectHighlightedItem,\n      setHighlightedIndex: setHighlightedIndex,\n      clearSelection: clearSelection,\n      clearItems: clearItems,\n      setItemCount: setItemCount,\n      unsetItemCount: unsetItemCount,\n      setState: setState,\n      // props\n      itemToString: itemToString,\n      // derived\n      id: id,\n      // state\n      highlightedIndex: highlightedIndex,\n      inputValue: inputValue,\n      isOpen: isOpen,\n      selectedItem: selectedItem\n    };\n  } //////////////////////////// ROOT\n  ;\n\n  _proto.componentDidMount = function componentDidMount() {\n    var _this5 = this;\n    /* istanbul ignore if (react-native) */\n\n\n    if (process.env.NODE_ENV !== 'production' && !false && this.getMenuProps.called && !this.getMenuProps.suppressRefError) {\n      validateGetMenuPropsCalledCorrectly(this._menuNode, this.getMenuProps);\n    }\n    /* istanbul ignore if (react-native) */\n\n\n    {\n      var targetWithinDownshift = function (target, checkActiveElement) {\n        if (checkActiveElement === void 0) {\n          checkActiveElement = true;\n        }\n\n        var document = _this5.props.environment.document;\n        return [_this5._rootNode, _this5._menuNode].some(function (contextNode) {\n          return contextNode && (isOrContainsNode(contextNode, target) || checkActiveElement && isOrContainsNode(contextNode, document.activeElement));\n        });\n      }; // this.isMouseDown helps us track whether the mouse is currently held down.\n      // This is useful when the user clicks on an item in the list, but holds the mouse\n      // down long enough for the list to disappear (because the blur event fires on the input)\n      // this.isMouseDown is used in the blur handler on the input to determine whether the blur event should\n      // trigger hiding the menu.\n\n\n      var onMouseDown = function () {\n        _this5.isMouseDown = true;\n      };\n\n      var onMouseUp = function (event) {\n        _this5.isMouseDown = false; // if the target element or the activeElement is within a downshift node\n        // then we don't want to reset downshift\n\n        var contextWithinDownshift = targetWithinDownshift(event.target);\n\n        if (!contextWithinDownshift && _this5.getState().isOpen) {\n          _this5.reset({\n            type: mouseUp\n          }, function () {\n            return _this5.props.onOuterClick(_this5.getStateAndHelpers());\n          });\n        }\n      }; // Touching an element in iOS gives focus and hover states, but touching out of\n      // the element will remove hover, and persist the focus state, resulting in the\n      // blur event not being triggered.\n      // this.isTouchMove helps us track whether the user is tapping or swiping on a touch screen.\n      // If the user taps outside of Downshift, the component should be reset,\n      // but not if the user is swiping\n\n\n      var onTouchStart = function () {\n        _this5.isTouchMove = false;\n      };\n\n      var onTouchMove = function () {\n        _this5.isTouchMove = true;\n      };\n\n      var onTouchEnd = function (event) {\n        var contextWithinDownshift = targetWithinDownshift(event.target, false);\n\n        if (!_this5.isTouchMove && !contextWithinDownshift && _this5.getState().isOpen) {\n          _this5.reset({\n            type: touchEnd\n          }, function () {\n            return _this5.props.onOuterClick(_this5.getStateAndHelpers());\n          });\n        }\n      };\n\n      this.props.environment.addEventListener('mousedown', onMouseDown);\n      this.props.environment.addEventListener('mouseup', onMouseUp);\n      this.props.environment.addEventListener('touchstart', onTouchStart);\n      this.props.environment.addEventListener('touchmove', onTouchMove);\n      this.props.environment.addEventListener('touchend', onTouchEnd);\n\n      this.cleanup = function () {\n        _this5.internalClearTimeouts();\n\n        _this5.updateStatus.cancel();\n\n        _this5.props.environment.removeEventListener('mousedown', onMouseDown);\n\n        _this5.props.environment.removeEventListener('mouseup', onMouseUp);\n\n        _this5.props.environment.removeEventListener('touchstart', onTouchStart);\n\n        _this5.props.environment.removeEventListener('touchmove', onTouchMove);\n\n        _this5.props.environment.removeEventListener('touchend', onTouchEnd);\n      };\n    }\n  };\n\n  _proto.shouldScroll = function shouldScroll(prevState, prevProps) {\n    var _ref10 = this.props.highlightedIndex === undefined ? this.getState() : this.props,\n        currentHighlightedIndex = _ref10.highlightedIndex;\n\n    var _ref11 = prevProps.highlightedIndex === undefined ? prevState : prevProps,\n        prevHighlightedIndex = _ref11.highlightedIndex;\n\n    var scrollWhenOpen = currentHighlightedIndex && this.getState().isOpen && !prevState.isOpen;\n    return scrollWhenOpen || currentHighlightedIndex !== prevHighlightedIndex;\n  };\n\n  _proto.componentDidUpdate = function componentDidUpdate(prevProps, prevState) {\n    if (process.env.NODE_ENV !== 'production') {\n      validateControlledUnchanged(prevProps, this.props);\n      /* istanbul ignore if (react-native) */\n\n      if (this.getMenuProps.called && !this.getMenuProps.suppressRefError) {\n        validateGetMenuPropsCalledCorrectly(this._menuNode, this.getMenuProps);\n      }\n    }\n\n    if (this.isControlledProp('selectedItem') && this.props.selectedItemChanged(prevProps.selectedItem, this.props.selectedItem)) {\n      this.internalSetState({\n        type: controlledPropUpdatedSelectedItem,\n        inputValue: this.props.itemToString(this.props.selectedItem)\n      });\n    }\n\n    if (!this.avoidScrolling && this.shouldScroll(prevState, prevProps)) {\n      this.scrollHighlightedItemIntoView();\n    }\n    /* istanbul ignore else (react-native) */\n\n\n    this.updateStatus();\n  };\n\n  _proto.componentWillUnmount = function componentWillUnmount() {\n    this.cleanup(); // avoids memory leak\n  };\n\n  _proto.render = function render() {\n    var children = unwrapArray(this.props.children, noop); // because the items are rerendered every time we call the children\n    // we clear this out each render and it will be populated again as\n    // getItemProps is called.\n\n    this.clearItems(); // we reset this so we know whether the user calls getRootProps during\n    // this render. If they do then we don't need to do anything,\n    // if they don't then we need to clone the element they return and\n    // apply the props for them.\n\n    this.getRootProps.called = false;\n    this.getRootProps.refKey = undefined;\n    this.getRootProps.suppressRefError = undefined; // we do something similar for getMenuProps\n\n    this.getMenuProps.called = false;\n    this.getMenuProps.refKey = undefined;\n    this.getMenuProps.suppressRefError = undefined; // we do something similar for getLabelProps\n\n    this.getLabelProps.called = false; // and something similar for getInputProps\n\n    this.getInputProps.called = false;\n    var element = unwrapArray(children(this.getStateAndHelpers()));\n\n    if (!element) {\n      return null;\n    }\n\n    if (this.getRootProps.called || this.props.suppressRefError) {\n      if (process.env.NODE_ENV !== 'production' && !this.getRootProps.suppressRefError && !this.props.suppressRefError) {\n        validateGetRootPropsCalledCorrectly(element, this.getRootProps);\n      }\n\n      return element;\n    } else if (isDOMElement(element)) {\n      // they didn't apply the root props, but we can clone\n      // this and apply the props ourselves\n      return React.cloneElement(element, this.getRootProps(getElementProps(element)));\n    }\n    /* istanbul ignore else */\n\n\n    if (process.env.NODE_ENV !== 'production') {\n      // they didn't apply the root props, but they need to\n      // otherwise we can't query around the autocomplete\n      throw new Error('downshift: If you return a non-DOM element, you must use apply the getRootProps function');\n    }\n    /* istanbul ignore next */\n\n\n    return undefined;\n  };\n\n  return Downshift;\n}(Component);\n\nDownshift.defaultProps = {\n  defaultHighlightedIndex: null,\n  defaultIsOpen: false,\n  getA11yStatusMessage: getA11yStatusMessage,\n  itemToString: function itemToString(i) {\n    if (i == null) {\n      return '';\n    }\n\n    if (process.env.NODE_ENV !== 'production' && isPlainObject(i) && !i.hasOwnProperty('toString')) {\n      // eslint-disable-next-line no-console\n      console.warn('downshift: An object was passed to the default implementation of `itemToString`. You should probably provide your own `itemToString` implementation. Please refer to the `itemToString` API documentation.', 'The object that was passed:', i);\n    }\n\n    return String(i);\n  },\n  onStateChange: noop,\n  onInputValueChange: noop,\n  onUserAction: noop,\n  onChange: noop,\n  onSelect: noop,\n  onOuterClick: noop,\n  selectedItemChanged: function selectedItemChanged(prevItem, item) {\n    return prevItem !== item;\n  },\n  environment: typeof window === 'undefined'\n  /* istanbul ignore next (ssr) */\n  ? {} : window,\n  stateReducer: function stateReducer(state, stateToSet) {\n    return stateToSet;\n  },\n  suppressRefError: false,\n  scrollIntoView: scrollIntoView\n};\nDownshift.stateChangeTypes = stateChangeTypes;\nprocess.env.NODE_ENV !== \"production\" ? Downshift.propTypes = {\n  children: PropTypes.func,\n  defaultHighlightedIndex: PropTypes.number,\n  defaultIsOpen: PropTypes.bool,\n  initialHighlightedIndex: PropTypes.number,\n  initialSelectedItem: PropTypes.any,\n  initialInputValue: PropTypes.string,\n  initialIsOpen: PropTypes.bool,\n  getA11yStatusMessage: PropTypes.func,\n  itemToString: PropTypes.func,\n  onChange: PropTypes.func,\n  onSelect: PropTypes.func,\n  onStateChange: PropTypes.func,\n  onInputValueChange: PropTypes.func,\n  onUserAction: PropTypes.func,\n  onOuterClick: PropTypes.func,\n  selectedItemChanged: PropTypes.func,\n  stateReducer: PropTypes.func,\n  itemCount: PropTypes.number,\n  id: PropTypes.string,\n  environment: PropTypes.shape({\n    addEventListener: PropTypes.func,\n    removeEventListener: PropTypes.func,\n    document: PropTypes.shape({\n      getElementById: PropTypes.func,\n      activeElement: PropTypes.any,\n      body: PropTypes.any\n    })\n  }),\n  suppressRefError: PropTypes.bool,\n  scrollIntoView: PropTypes.func,\n  // things we keep in state for uncontrolled components\n  // but can accept as props for controlled components\n\n  /* eslint-disable react/no-unused-prop-types */\n  selectedItem: PropTypes.any,\n  isOpen: PropTypes.bool,\n  inputValue: PropTypes.string,\n  highlightedIndex: PropTypes.number,\n  labelId: PropTypes.string,\n  inputId: PropTypes.string,\n  menuId: PropTypes.string,\n  getItemId: PropTypes.func\n  /* eslint-enable react/no-unused-prop-types */\n\n} : void 0;\n\nfunction validateGetMenuPropsCalledCorrectly(node, _ref12) {\n  var refKey = _ref12.refKey;\n\n  if (!node) {\n    // eslint-disable-next-line no-console\n    console.error(\"downshift: The ref prop \\\"\" + refKey + \"\\\" from getMenuProps was not applied correctly on your menu element.\");\n  }\n}\n\nfunction validateGetRootPropsCalledCorrectly(element, _ref13) {\n  var refKey = _ref13.refKey;\n  var refKeySpecified = refKey !== 'ref';\n  var isComposite = !isDOMElement(element);\n\n  if (isComposite && !refKeySpecified && !isForwardRef(element)) {\n    // eslint-disable-next-line no-console\n    console.error('downshift: You returned a non-DOM element. You must specify a refKey in getRootProps');\n  } else if (!isComposite && refKeySpecified) {\n    // eslint-disable-next-line no-console\n    console.error(\"downshift: You returned a DOM element. You should not specify a refKey in getRootProps. You specified \\\"\" + refKey + \"\\\"\");\n  }\n\n  if (!isForwardRef(element) && !getElementProps(element)[refKey]) {\n    // eslint-disable-next-line no-console\n    console.error(\"downshift: You must apply the ref prop \\\"\" + refKey + \"\\\" from getRootProps onto your root element.\");\n  }\n}\n\nfunction validateControlledUnchanged(prevProps, nextProps) {\n  var warningDescription = \"This prop should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled Downshift element for the lifetime of the component. More info: https://github.com/downshift-js/downshift#control-props\";\n  ['selectedItem', 'isOpen', 'inputValue', 'highlightedIndex'].forEach(function (propKey) {\n    if (prevProps[propKey] !== undefined && nextProps[propKey] === undefined) {\n      // eslint-disable-next-line no-console\n      console.error(\"downshift: A component has changed the controlled prop \\\"\" + propKey + \"\\\" to be uncontrolled. \" + warningDescription);\n    } else if (prevProps[propKey] === undefined && nextProps[propKey] !== undefined) {\n      // eslint-disable-next-line no-console\n      console.error(\"downshift: A component has changed the uncontrolled prop \\\"\" + propKey + \"\\\" to be controlled. \" + warningDescription);\n    }\n  });\n}\n\nexport default Downshift;\nexport { resetIdCounter };","map":{"version":3,"sources":["/node_modules/downshift/dist/downshift.esm.js"],"names":["_objectWithoutPropertiesLoose","_extends","_assertThisInitialized","_inheritsLoose","PropTypes","React","Component","isForwardRef","computeScrollIntoView","statusDiv","document","getElementById","statuses","setStatus","status","isSameAsLast","length","concat","div","getStatusDiv","lastChild","removeChild","firstChild","filter","Boolean","forEach","statusItem","index","appendChild","getStatusChildDiv","display","childDiv","createElement","style","textContent","setAttribute","Object","assign","border","clip","height","margin","overflow","padding","position","width","body","unknown","process","env","NODE_ENV","mouseUp","itemMouseEnter","keyDownArrowUp","keyDownArrowDown","keyDownEscape","keyDownEnter","keyDownHome","keyDownEnd","clickItem","blurInput","changeInput","keyDownSpaceButton","clickButton","blurButton","controlledPropUpdatedSelectedItem","touchEnd","stateChangeTypes","freeze","idCounter","cbToCb","cb","noop","scrollIntoView","node","menuNode","actions","boundary","block","scrollMode","_ref","el","top","left","scrollTop","scrollLeft","isOrContainsNode","parent","child","contains","debounce","fn","time","timeoutId","cancel","clearTimeout","wrapper","_len","arguments","args","Array","_key","setTimeout","apply","callAllEventHandlers","_len2","fns","_key2","event","_len3","_key3","some","preventDownshiftDefault","hasOwnProperty","nativeEvent","callAll","_len4","_key4","_len5","_key5","generateId","String","resetIdCounter","getA11yStatusMessage","_ref2","isOpen","selectedItem","resultCount","previousResultCount","itemToString","unwrapArray","arg","defaultValue","isArray","isDOMElement","element","type","getElementProps","props","requiredProp","fnName","propName","console","error","stateKeys","pickState","state","result","k","normalizeArrowKey","key","keyCode","indexOf","isPlainObject","obj","prototype","toString","call","getNextWrappingIndex","moveAmount","baseIndex","itemCount","itemsLastIndex","newIndex","Downshift","_Component","_props","_this","id","menuId","labelId","inputId","getItemId","input","items","timeoutIds","internalSetTimeout","i","push","setItemCount","count","unsetItemCount","setHighlightedIndex","highlightedIndex","otherStateToSet","defaultHighlightedIndex","internalSetState","clearSelection","inputValue","defaultIsOpen","selectItem","item","selectItemAtIndex","itemIndex","selectHighlightedItem","getState","stateToSet","isItemSelected","onChangeArg","onStateChangeArg","isStateToSetFunction","onInputValueChange","getStateAndHelpers","setState","newStateToSet","stateReducer","nextState","nextFullState","keys","isControlledProp","hasMoreStateThanType","onStateChange","onSelect","undefined","onChange","onUserAction","rootRef","_rootNode","getRootProps","_temp","_temp2","_extends2","_ref$refKey","refKey","rest","_ref2$suppressRefErro","suppressRefError","called","_this$getState","role","keyDownHandlers","ArrowDown","_this2","preventDefault","amount","shiftKey","moveHighlightedIndex","getItemCount","ArrowUp","_this3","Enter","_this$getState2","itemNode","getItemNodeFromIndex","hasAttribute","Escape","reset","buttonKeyDownHandlers","_","toggleMenu","inputKeyDownHandlers","Home","highlightFirstOrLastIndex","End","getToggleButtonProps","_temp3","_ref3","onClick","onPress","onKeyDown","onKeyUp","onBlur","_this$getState3","enabledEventHandlers","buttonHandleClick","buttonHandleKeyDown","buttonHandleKeyUp","buttonHandleBlur","eventHandlers","disabled","environment","activeElement","target","focus","blurTarget","isMouseDown","getLabelProps","htmlFor","getInputProps","_temp4","_ref4","onInput","onChangeText","onChangeKey","_this$getState4","_eventHandlers","inputHandleChange","inputHandleKeyDown","inputHandleBlur","autoComplete","value","inputHandleTextChange","text","downshiftButtonIsActive","dataset","toggle","menuRef","_menuNode","getMenuProps","_temp5","_temp6","_extends3","_ref5","_ref5$refKey","ref","_ref6","_ref6$suppressRefErro","getItemProps","_temp7","_enabledEventHandlers","_ref7","onMouseMove","onMouseDown","_ref7$item","onSelectKey","customClickHandler","avoidScrolling","clearItems","_ref8","_ref9","_this$getState5","openMenu","closeMenu","updateStatus","highlightedItem","_this$props","_this$props$initialHi","initialHighlightedIndex","_highlightedIndex","_this$props$initialIs","initialIsOpen","_isOpen","_this$props$initialIn","initialInputValue","_inputValue","_this$props$initialSe","initialSelectedItem","_selectedItem","_state","_proto","internalClearTimeouts","stateToMerge","_this4","reduce","scrollHighlightedItemIntoView","nextHighlightedIndex","first","_this$getState6","componentDidMount","_this5","validateGetMenuPropsCalledCorrectly","targetWithinDownshift","checkActiveElement","contextNode","onMouseUp","contextWithinDownshift","onOuterClick","onTouchStart","isTouchMove","onTouchMove","onTouchEnd","addEventListener","cleanup","removeEventListener","shouldScroll","prevState","prevProps","_ref10","currentHighlightedIndex","_ref11","prevHighlightedIndex","scrollWhenOpen","componentDidUpdate","validateControlledUnchanged","selectedItemChanged","componentWillUnmount","render","children","validateGetRootPropsCalledCorrectly","cloneElement","Error","defaultProps","warn","prevItem","window","propTypes","func","number","bool","any","string","shape","_ref12","_ref13","refKeySpecified","isComposite","nextProps","warningDescription","propKey"],"mappings":"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","sourcesContent":["import _objectWithoutPropertiesLoose from '@babel/runtime/helpers/esm/objectWithoutPropertiesLoose';\nimport _extends from '@babel/runtime/helpers/esm/extends';\nimport _assertThisInitialized from '@babel/runtime/helpers/esm/assertThisInitialized';\nimport _inheritsLoose from '@babel/runtime/helpers/esm/inheritsLoose';\nimport PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { isForwardRef } from 'react-is';\nimport computeScrollIntoView from 'compute-scroll-into-view';\n\n// istanbul ignore next\nvar statusDiv = typeof document === 'undefined' ? null : document.getElementById('a11y-status-message');\nvar statuses = [];\n/**\n * @param {String} status the status message\n */\n\nfunction setStatus(status) {\n  var isSameAsLast = statuses[statuses.length - 1] === status;\n\n  if (isSameAsLast) {\n    statuses = [].concat(statuses, [status]);\n  } else {\n    statuses = [status];\n  }\n\n  var div = getStatusDiv(); // Remove previous children\n\n  while (div.lastChild) {\n    div.removeChild(div.firstChild);\n  }\n\n  statuses.filter(Boolean).forEach(function (statusItem, index) {\n    div.appendChild(getStatusChildDiv(statusItem, index));\n  });\n}\n/**\n * @param {String} status the status message\n * @param {Number} index the index\n * @return {HTMLElement} the child node\n */\n\n\nfunction getStatusChildDiv(status, index) {\n  var display = index === statuses.length - 1 ? 'block' : 'none';\n  var childDiv = document.createElement('div');\n  childDiv.style.display = display;\n  childDiv.textContent = status;\n  return childDiv;\n}\n/**\n * Get the status node or create it if it does not already exist\n * @return {HTMLElement} the status node\n */\n\n\nfunction getStatusDiv() {\n  if (statusDiv) {\n    return statusDiv;\n  }\n\n  statusDiv = document.createElement('div');\n  statusDiv.setAttribute('id', 'a11y-status-message');\n  statusDiv.setAttribute('role', 'status');\n  statusDiv.setAttribute('aria-live', 'polite');\n  statusDiv.setAttribute('aria-relevant', 'additions text');\n  Object.assign(statusDiv.style, {\n    border: '0',\n    clip: 'rect(0 0 0 0)',\n    height: '1px',\n    margin: '-1px',\n    overflow: 'hidden',\n    padding: '0',\n    position: 'absolute',\n    width: '1px'\n  });\n  document.body.appendChild(statusDiv);\n  return statusDiv;\n}\n\nvar unknown = process.env.NODE_ENV !== \"production\" ? '__autocomplete_unknown__' : 0;\nvar mouseUp = process.env.NODE_ENV !== \"production\" ? '__autocomplete_mouseup__' : 1;\nvar itemMouseEnter = process.env.NODE_ENV !== \"production\" ? '__autocomplete_item_mouseenter__' : 2;\nvar keyDownArrowUp = process.env.NODE_ENV !== \"production\" ? '__autocomplete_keydown_arrow_up__' : 3;\nvar keyDownArrowDown = process.env.NODE_ENV !== \"production\" ? '__autocomplete_keydown_arrow_down__' : 4;\nvar keyDownEscape = process.env.NODE_ENV !== \"production\" ? '__autocomplete_keydown_escape__' : 5;\nvar keyDownEnter = process.env.NODE_ENV !== \"production\" ? '__autocomplete_keydown_enter__' : 6;\nvar keyDownHome = process.env.NODE_ENV !== \"production\" ? '__autocomplete_keydown_home__' : 7;\nvar keyDownEnd = process.env.NODE_ENV !== \"production\" ? '__autocomplete_keydown_enter__' : 8;\nvar clickItem = process.env.NODE_ENV !== \"production\" ? '__autocomplete_click_item__' : 9;\nvar blurInput = process.env.NODE_ENV !== \"production\" ? '__autocomplete_blur_input__' : 10;\nvar changeInput = process.env.NODE_ENV !== \"production\" ? '__autocomplete_change_input__' : 11;\nvar keyDownSpaceButton = process.env.NODE_ENV !== \"production\" ? '__autocomplete_keydown_space_button__' : 12;\nvar clickButton = process.env.NODE_ENV !== \"production\" ? '__autocomplete_click_button__' : 13;\nvar blurButton = process.env.NODE_ENV !== \"production\" ? '__autocomplete_blur_button__' : 14;\nvar controlledPropUpdatedSelectedItem = process.env.NODE_ENV !== \"production\" ? '__autocomplete_controlled_prop_updated_selected_item__' : 15;\nvar touchEnd = process.env.NODE_ENV !== \"production\" ? '__autocomplete_touchend__' : 16;\n\nvar stateChangeTypes = /*#__PURE__*/Object.freeze({\n  unknown: unknown,\n  mouseUp: mouseUp,\n  itemMouseEnter: itemMouseEnter,\n  keyDownArrowUp: keyDownArrowUp,\n  keyDownArrowDown: keyDownArrowDown,\n  keyDownEscape: keyDownEscape,\n  keyDownEnter: keyDownEnter,\n  keyDownHome: keyDownHome,\n  keyDownEnd: keyDownEnd,\n  clickItem: clickItem,\n  blurInput: blurInput,\n  changeInput: changeInput,\n  keyDownSpaceButton: keyDownSpaceButton,\n  clickButton: clickButton,\n  blurButton: blurButton,\n  controlledPropUpdatedSelectedItem: controlledPropUpdatedSelectedItem,\n  touchEnd: touchEnd\n});\n\nvar idCounter = 0;\n/**\n * Accepts a parameter and returns it if it's a function\n * or a noop function if it's not. This allows us to\n * accept a callback, but not worry about it if it's not\n * passed.\n * @param {Function} cb the callback\n * @return {Function} a function\n */\n\nfunction cbToCb(cb) {\n  return typeof cb === 'function' ? cb : noop;\n}\n\nfunction noop() {}\n/**\n * Scroll node into view if necessary\n * @param {HTMLElement} node the element that should scroll into view\n * @param {HTMLElement} menuNode the menu element of the component\n */\n\n\nfunction scrollIntoView(node, menuNode) {\n  if (node === null) {\n    return;\n  }\n\n  var actions = computeScrollIntoView(node, {\n    boundary: menuNode,\n    block: 'nearest',\n    scrollMode: 'if-needed'\n  });\n  actions.forEach(function (_ref) {\n    var el = _ref.el,\n        top = _ref.top,\n        left = _ref.left;\n    el.scrollTop = top;\n    el.scrollLeft = left;\n  });\n}\n/**\n * @param {HTMLElement} parent the parent node\n * @param {HTMLElement} child the child node\n * @return {Boolean} whether the parent is the child or the child is in the parent\n */\n\n\nfunction isOrContainsNode(parent, child) {\n  return parent === child || parent.contains && parent.contains(child);\n}\n/**\n * Simple debounce implementation. Will call the given\n * function once after the time given has passed since\n * it was last called.\n * @param {Function} fn the function to call after the time\n * @param {Number} time the time to wait\n * @return {Function} the debounced function\n */\n\n\nfunction debounce(fn, time) {\n  var timeoutId;\n\n  function cancel() {\n    if (timeoutId) {\n      clearTimeout(timeoutId);\n    }\n  }\n\n  function wrapper() {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    cancel();\n    timeoutId = setTimeout(function () {\n      timeoutId = null;\n      fn.apply(void 0, args);\n    }, time);\n  }\n\n  wrapper.cancel = cancel;\n  return wrapper;\n}\n/**\n * This is intended to be used to compose event handlers.\n * They are executed in order until one of them sets\n * `event.preventDownshiftDefault = true`.\n * @param {...Function} fns the event handler functions\n * @return {Function} the event handler to add to an element\n */\n\n\nfunction callAllEventHandlers() {\n  for (var _len2 = arguments.length, fns = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n    fns[_key2] = arguments[_key2];\n  }\n\n  return function (event) {\n    for (var _len3 = arguments.length, args = new Array(_len3 > 1 ? _len3 - 1 : 0), _key3 = 1; _key3 < _len3; _key3++) {\n      args[_key3 - 1] = arguments[_key3];\n    }\n\n    return fns.some(function (fn) {\n      if (fn) {\n        fn.apply(void 0, [event].concat(args));\n      }\n\n      return event.preventDownshiftDefault || event.hasOwnProperty('nativeEvent') && event.nativeEvent.preventDownshiftDefault;\n    });\n  };\n}\n/**\n * This return a function that will call all the given functions with\n * the arguments with which it's called. It does a null-check before\n * attempting to call the functions and can take any number of functions.\n * @param {...Function} fns the functions to call\n * @return {Function} the function that calls all the functions\n */\n\n\nfunction callAll() {\n  for (var _len4 = arguments.length, fns = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n    fns[_key4] = arguments[_key4];\n  }\n\n  return function () {\n    for (var _len5 = arguments.length, args = new Array(_len5), _key5 = 0; _key5 < _len5; _key5++) {\n      args[_key5] = arguments[_key5];\n    }\n\n    fns.forEach(function (fn) {\n      if (fn) {\n        fn.apply(void 0, args);\n      }\n    });\n  };\n}\n/**\n * This generates a unique ID for an instance of Downshift\n * @return {String} the unique ID\n */\n\n\nfunction generateId() {\n  return String(idCounter++);\n}\n/**\n * Resets idCounter to 0. Used for SSR.\n */\n\n\nfunction resetIdCounter() {\n  idCounter = 0;\n}\n/**\n * @param {Object} param the downshift state and other relevant properties\n * @return {String} the a11y status message\n */\n\n\nfunction getA11yStatusMessage(_ref2) {\n  var isOpen = _ref2.isOpen,\n      selectedItem = _ref2.selectedItem,\n      resultCount = _ref2.resultCount,\n      previousResultCount = _ref2.previousResultCount,\n      itemToString = _ref2.itemToString;\n\n  if (!isOpen) {\n    return selectedItem ? itemToString(selectedItem) : '';\n  }\n\n  if (!resultCount) {\n    return 'No results are available.';\n  }\n\n  if (resultCount !== previousResultCount) {\n    return resultCount + \" result\" + (resultCount === 1 ? ' is' : 's are') + \" available, use up and down arrow keys to navigate. Press Enter key to select.\";\n  }\n\n  return '';\n}\n/**\n * Takes an argument and if it's an array, returns the first item in the array\n * otherwise returns the argument\n * @param {*} arg the maybe-array\n * @param {*} defaultValue the value if arg is falsey not defined\n * @return {*} the arg or it's first item\n */\n\n\nfunction unwrapArray(arg, defaultValue) {\n  arg = Array.isArray(arg) ?\n  /* istanbul ignore next (preact) */\n  arg[0] : arg;\n\n  if (!arg && defaultValue) {\n    return defaultValue;\n  } else {\n    return arg;\n  }\n}\n/**\n * @param {Object} element (P)react element\n * @return {Boolean} whether it's a DOM element\n */\n\n\nfunction isDOMElement(element) {\n  // then we assume this is react\n  return typeof element.type === 'string';\n}\n/**\n * @param {Object} element (P)react element\n * @return {Object} the props\n */\n\n\nfunction getElementProps(element) {\n  return element.props;\n}\n/**\n * Throws a helpful error message for required properties. Useful\n * to be used as a default in destructuring or object params.\n * @param {String} fnName the function name\n * @param {String} propName the prop name\n */\n\n\nfunction requiredProp(fnName, propName) {\n  // eslint-disable-next-line no-console\n  console.error(\"The property \\\"\" + propName + \"\\\" is required in \\\"\" + fnName + \"\\\"\");\n}\n\nvar stateKeys = ['highlightedIndex', 'inputValue', 'isOpen', 'selectedItem', 'type'];\n/**\n * @param {Object} state the state object\n * @return {Object} state that is relevant to downshift\n */\n\nfunction pickState(state) {\n  if (state === void 0) {\n    state = {};\n  }\n\n  var result = {};\n  stateKeys.forEach(function (k) {\n    if (state.hasOwnProperty(k)) {\n      result[k] = state[k];\n    }\n  });\n  return result;\n}\n/**\n * Normalizes the 'key' property of a KeyboardEvent in IE/Edge\n * @param {Object} event a keyboardEvent object\n * @return {String} keyboard key\n */\n\n\nfunction normalizeArrowKey(event) {\n  var key = event.key,\n      keyCode = event.keyCode;\n  /* istanbul ignore next (ie) */\n\n  if (keyCode >= 37 && keyCode <= 40 && key.indexOf('Arrow') !== 0) {\n    return \"Arrow\" + key;\n  }\n\n  return key;\n}\n/**\n * Simple check if the value passed is object literal\n * @param {*} obj any things\n * @return {Boolean} whether it's object literal\n */\n\n\nfunction isPlainObject(obj) {\n  return Object.prototype.toString.call(obj) === '[object Object]';\n}\n/**\n * Returns the new index in the list, in a circular way. If next value is out of bonds from the total,\n * it will wrap to either 0 or itemCount - 1.\n *\n * @param {number} moveAmount Number of positions to move. Negative to move backwards, positive forwards.\n * @param {number} baseIndex The initial position to move from.\n * @param {number} itemCount The total number of items.\n * @returns {number} The new index after the move.\n */\n\n\nfunction getNextWrappingIndex(moveAmount, baseIndex, itemCount) {\n  var itemsLastIndex = itemCount - 1;\n\n  if (typeof baseIndex !== 'number' || baseIndex < 0 || baseIndex >= itemCount) {\n    baseIndex = moveAmount > 0 ? -1 : itemsLastIndex + 1;\n  }\n\n  var newIndex = baseIndex + moveAmount;\n\n  if (newIndex < 0) {\n    newIndex = itemsLastIndex;\n  } else if (newIndex > itemsLastIndex) {\n    newIndex = 0;\n  }\n\n  return newIndex;\n}\n\nvar Downshift =\n/*#__PURE__*/\nfunction (_Component) {\n  _inheritsLoose(Downshift, _Component);\n\n  function Downshift(_props) {\n    var _this = _Component.call(this, _props) || this;\n\n    _this.id = _this.props.id || \"downshift-\" + generateId();\n    _this.menuId = _this.props.menuId || _this.id + \"-menu\";\n    _this.labelId = _this.props.labelId || _this.id + \"-label\";\n    _this.inputId = _this.props.inputId || _this.id + \"-input\";\n\n    _this.getItemId = _this.props.getItemId || function (index) {\n      return _this.id + \"-item-\" + index;\n    };\n\n    _this.input = null;\n    _this.items = [];\n    _this.itemCount = null;\n    _this.previousResultCount = 0;\n    _this.timeoutIds = [];\n\n    _this.internalSetTimeout = function (fn, time) {\n      var id = setTimeout(function () {\n        _this.timeoutIds = _this.timeoutIds.filter(function (i) {\n          return i !== id;\n        });\n        fn();\n      }, time);\n\n      _this.timeoutIds.push(id);\n    };\n\n    _this.setItemCount = function (count) {\n      _this.itemCount = count;\n    };\n\n    _this.unsetItemCount = function () {\n      _this.itemCount = null;\n    };\n\n    _this.setHighlightedIndex = function (highlightedIndex, otherStateToSet) {\n      if (highlightedIndex === void 0) {\n        highlightedIndex = _this.props.defaultHighlightedIndex;\n      }\n\n      if (otherStateToSet === void 0) {\n        otherStateToSet = {};\n      }\n\n      otherStateToSet = pickState(otherStateToSet);\n\n      _this.internalSetState(_extends({\n        highlightedIndex: highlightedIndex\n      }, otherStateToSet));\n    };\n\n    _this.clearSelection = function (cb) {\n      _this.internalSetState({\n        selectedItem: null,\n        inputValue: '',\n        highlightedIndex: _this.props.defaultHighlightedIndex,\n        isOpen: _this.props.defaultIsOpen\n      }, cb);\n    };\n\n    _this.selectItem = function (item, otherStateToSet, cb) {\n      otherStateToSet = pickState(otherStateToSet);\n\n      _this.internalSetState(_extends({\n        isOpen: _this.props.defaultIsOpen,\n        highlightedIndex: _this.props.defaultHighlightedIndex,\n        selectedItem: item,\n        inputValue: _this.props.itemToString(item)\n      }, otherStateToSet), cb);\n    };\n\n    _this.selectItemAtIndex = function (itemIndex, otherStateToSet, cb) {\n      var item = _this.items[itemIndex];\n\n      if (item == null) {\n        return;\n      }\n\n      _this.selectItem(item, otherStateToSet, cb);\n    };\n\n    _this.selectHighlightedItem = function (otherStateToSet, cb) {\n      return _this.selectItemAtIndex(_this.getState().highlightedIndex, otherStateToSet, cb);\n    };\n\n    _this.internalSetState = function (stateToSet, cb) {\n      var isItemSelected, onChangeArg;\n      var onStateChangeArg = {};\n      var isStateToSetFunction = typeof stateToSet === 'function'; // we want to call `onInputValueChange` before the `setState` call\n      // so someone controlling the `inputValue` state gets notified of\n      // the input change as soon as possible. This avoids issues with\n      // preserving the cursor position.\n      // See https://github.com/downshift-js/downshift/issues/217 for more info.\n\n      if (!isStateToSetFunction && stateToSet.hasOwnProperty('inputValue')) {\n        _this.props.onInputValueChange(stateToSet.inputValue, _extends({}, _this.getStateAndHelpers(), stateToSet));\n      }\n\n      return _this.setState(function (state) {\n        state = _this.getState(state);\n        var newStateToSet = isStateToSetFunction ? stateToSet(state) : stateToSet; // Your own function that could modify the state that will be set.\n\n        newStateToSet = _this.props.stateReducer(state, newStateToSet); // checks if an item is selected, regardless of if it's different from\n        // what was selected before\n        // used to determine if onSelect and onChange callbacks should be called\n\n        isItemSelected = newStateToSet.hasOwnProperty('selectedItem'); // this keeps track of the object we want to call with setState\n\n        var nextState = {}; // this is just used to tell whether the state changed\n\n        var nextFullState = {}; // we need to call on change if the outside world is controlling any of our state\n        // and we're trying to update that state. OR if the selection has changed and we're\n        // trying to update the selection\n\n        if (isItemSelected && newStateToSet.selectedItem !== state.selectedItem) {\n          onChangeArg = newStateToSet.selectedItem;\n        }\n\n        newStateToSet.type = newStateToSet.type || unknown;\n        Object.keys(newStateToSet).forEach(function (key) {\n          // onStateChangeArg should only have the state that is\n          // actually changing\n          if (state[key] !== newStateToSet[key]) {\n            onStateChangeArg[key] = newStateToSet[key];\n          } // the type is useful for the onStateChangeArg\n          // but we don't actually want to set it in internal state.\n          // this is an undocumented feature for now... Not all internalSetState\n          // calls support it and I'm not certain we want them to yet.\n          // But it enables users controlling the isOpen state to know when\n          // the isOpen state changes due to mouseup events which is quite handy.\n\n\n          if (key === 'type') {\n            return;\n          }\n\n          nextFullState[key] = newStateToSet[key]; // if it's coming from props, then we don't care to set it internally\n\n          if (!_this.isControlledProp(key)) {\n            nextState[key] = newStateToSet[key];\n          }\n        }); // if stateToSet is a function, then we weren't able to call onInputValueChange\n        // earlier, so we'll call it now that we know what the inputValue state will be.\n\n        if (isStateToSetFunction && newStateToSet.hasOwnProperty('inputValue')) {\n          _this.props.onInputValueChange(newStateToSet.inputValue, _extends({}, _this.getStateAndHelpers(), newStateToSet));\n        }\n\n        return nextState;\n      }, function () {\n        // call the provided callback if it's a function\n        cbToCb(cb)(); // only call the onStateChange and onChange callbacks if\n        // we have relevant information to pass them.\n\n        var hasMoreStateThanType = Object.keys(onStateChangeArg).length > 1;\n\n        if (hasMoreStateThanType) {\n          _this.props.onStateChange(onStateChangeArg, _this.getStateAndHelpers());\n        }\n\n        if (isItemSelected) {\n          _this.props.onSelect(stateToSet.selectedItem, _this.getStateAndHelpers());\n        }\n\n        if (onChangeArg !== undefined) {\n          _this.props.onChange(onChangeArg, _this.getStateAndHelpers());\n        } // this is currently undocumented and therefore subject to change\n        // We'll try to not break it, but just be warned.\n\n\n        _this.props.onUserAction(onStateChangeArg, _this.getStateAndHelpers());\n      });\n    };\n\n    _this.rootRef = function (node) {\n      return _this._rootNode = node;\n    };\n\n    _this.getRootProps = function (_temp, _temp2) {\n      var _extends2;\n\n      var _ref = _temp === void 0 ? {} : _temp,\n          _ref$refKey = _ref.refKey,\n          refKey = _ref$refKey === void 0 ? 'ref' : _ref$refKey,\n          rest = _objectWithoutPropertiesLoose(_ref, [\"refKey\"]);\n\n      var _ref2 = _temp2 === void 0 ? {} : _temp2,\n          _ref2$suppressRefErro = _ref2.suppressRefError,\n          suppressRefError = _ref2$suppressRefErro === void 0 ? false : _ref2$suppressRefErro;\n\n      // this is used in the render to know whether the user has called getRootProps.\n      // It uses that to know whether to apply the props automatically\n      _this.getRootProps.called = true;\n      _this.getRootProps.refKey = refKey;\n      _this.getRootProps.suppressRefError = suppressRefError;\n\n      var _this$getState = _this.getState(),\n          isOpen = _this$getState.isOpen;\n\n      return _extends((_extends2 = {}, _extends2[refKey] = _this.rootRef, _extends2.role = 'combobox', _extends2['aria-expanded'] = isOpen, _extends2['aria-haspopup'] = 'listbox', _extends2['aria-owns'] = isOpen ? _this.menuId : null, _extends2['aria-labelledby'] = _this.labelId, _extends2), rest);\n    };\n\n    _this.keyDownHandlers = {\n      ArrowDown: function ArrowDown(event) {\n        var _this2 = this;\n\n        event.preventDefault();\n\n        if (this.getState().isOpen) {\n          var amount = event.shiftKey ? 5 : 1;\n          this.moveHighlightedIndex(amount, {\n            type: keyDownArrowDown\n          });\n        } else {\n          this.internalSetState({\n            isOpen: true,\n            type: keyDownArrowDown\n          }, function () {\n            var itemCount = _this2.getItemCount();\n\n            if (itemCount > 0) {\n              _this2.setHighlightedIndex(getNextWrappingIndex(1, _this2.getState().highlightedIndex, itemCount), {\n                type: keyDownArrowDown\n              });\n            }\n          });\n        }\n      },\n      ArrowUp: function ArrowUp(event) {\n        var _this3 = this;\n\n        event.preventDefault();\n\n        if (this.getState().isOpen) {\n          var amount = event.shiftKey ? -5 : -1;\n          this.moveHighlightedIndex(amount, {\n            type: keyDownArrowUp\n          });\n        } else {\n          this.internalSetState({\n            isOpen: true,\n            type: keyDownArrowUp\n          }, function () {\n            var itemCount = _this3.getItemCount();\n\n            if (itemCount > 0) {\n              _this3.setHighlightedIndex(getNextWrappingIndex(-1, _this3.getState().highlightedIndex, itemCount), {\n                type: keyDownArrowDown\n              });\n            }\n          });\n        }\n      },\n      Enter: function Enter(event) {\n        var _this$getState2 = this.getState(),\n            isOpen = _this$getState2.isOpen,\n            highlightedIndex = _this$getState2.highlightedIndex;\n\n        if (isOpen && highlightedIndex != null) {\n          event.preventDefault();\n          var item = this.items[highlightedIndex];\n          var itemNode = this.getItemNodeFromIndex(highlightedIndex);\n\n          if (item == null || itemNode && itemNode.hasAttribute('disabled')) {\n            return;\n          }\n\n          this.selectHighlightedItem({\n            type: keyDownEnter\n          });\n        }\n      },\n      Escape: function Escape(event) {\n        event.preventDefault();\n        this.reset({\n          type: keyDownEscape\n        });\n      }\n    };\n    _this.buttonKeyDownHandlers = _extends({}, _this.keyDownHandlers, {\n      ' ': function _(event) {\n        event.preventDefault();\n        this.toggleMenu({\n          type: keyDownSpaceButton\n        });\n      }\n    });\n    _this.inputKeyDownHandlers = _extends({}, _this.keyDownHandlers, {\n      Home: function Home(event) {\n        this.highlightFirstOrLastIndex(event, true, {\n          type: keyDownHome\n        });\n      },\n      End: function End(event) {\n        this.highlightFirstOrLastIndex(event, false, {\n          type: keyDownEnd\n        });\n      }\n    });\n\n    _this.getToggleButtonProps = function (_temp3) {\n      var _ref3 = _temp3 === void 0 ? {} : _temp3,\n          onClick = _ref3.onClick,\n          onPress = _ref3.onPress,\n          onKeyDown = _ref3.onKeyDown,\n          onKeyUp = _ref3.onKeyUp,\n          onBlur = _ref3.onBlur,\n          rest = _objectWithoutPropertiesLoose(_ref3, [\"onClick\", \"onPress\", \"onKeyDown\", \"onKeyUp\", \"onBlur\"]);\n\n      var _this$getState3 = _this.getState(),\n          isOpen = _this$getState3.isOpen;\n\n      var enabledEventHandlers = {\n        onClick: callAllEventHandlers(onClick, _this.buttonHandleClick),\n        onKeyDown: callAllEventHandlers(onKeyDown, _this.buttonHandleKeyDown),\n        onKeyUp: callAllEventHandlers(onKeyUp, _this.buttonHandleKeyUp),\n        onBlur: callAllEventHandlers(onBlur, _this.buttonHandleBlur)\n      };\n      var eventHandlers = rest.disabled ? {} : enabledEventHandlers;\n      return _extends({\n        type: 'button',\n        role: 'button',\n        'aria-label': isOpen ? 'close menu' : 'open menu',\n        'aria-haspopup': true,\n        'data-toggle': true\n      }, eventHandlers, rest);\n    };\n\n    _this.buttonHandleKeyUp = function (event) {\n      // Prevent click event from emitting in Firefox\n      event.preventDefault();\n    };\n\n    _this.buttonHandleKeyDown = function (event) {\n      var key = normalizeArrowKey(event);\n\n      if (_this.buttonKeyDownHandlers[key]) {\n        _this.buttonKeyDownHandlers[key].call(_assertThisInitialized(_this), event);\n      }\n    };\n\n    _this.buttonHandleClick = function (event) {\n      event.preventDefault(); // handle odd case for Safari and Firefox which\n      // don't give the button the focus properly.\n\n      /* istanbul ignore if (can't reasonably test this) */\n\n      if (_this.props.environment.document.activeElement === _this.props.environment.document.body) {\n        event.target.focus();\n      } // to simplify testing components that use downshift, we'll not wrap this in a setTimeout\n      // if the NODE_ENV is test. With the proper build system, this should be dead code eliminated\n      // when building for production and should therefore have no impact on production code.\n\n\n      if (process.env.NODE_ENV === 'test') {\n        _this.toggleMenu({\n          type: clickButton\n        });\n      } else {\n        // Ensure that toggle of menu occurs after the potential blur event in iOS\n        _this.internalSetTimeout(function () {\n          return _this.toggleMenu({\n            type: clickButton\n          });\n        });\n      }\n    };\n\n    _this.buttonHandleBlur = function (event) {\n      var blurTarget = event.target; // Save blur target for comparison with activeElement later\n      // Need setTimeout, so that when the user presses Tab, the activeElement is the next focused element, not body element\n\n      _this.internalSetTimeout(function () {\n        if (!_this.isMouseDown && (_this.props.environment.document.activeElement == null || _this.props.environment.document.activeElement.id !== _this.inputId) && _this.props.environment.document.activeElement !== blurTarget // Do nothing if we refocus the same element again (to solve issue in Safari on iOS)\n        ) {\n            _this.reset({\n              type: blurButton\n            });\n          }\n      });\n    };\n\n    _this.getLabelProps = function (props) {\n      return _extends({\n        htmlFor: _this.inputId,\n        id: _this.labelId\n      }, props);\n    };\n\n    _this.getInputProps = function (_temp4) {\n      var _ref4 = _temp4 === void 0 ? {} : _temp4,\n          onKeyDown = _ref4.onKeyDown,\n          onBlur = _ref4.onBlur,\n          onChange = _ref4.onChange,\n          onInput = _ref4.onInput,\n          onChangeText = _ref4.onChangeText,\n          rest = _objectWithoutPropertiesLoose(_ref4, [\"onKeyDown\", \"onBlur\", \"onChange\", \"onInput\", \"onChangeText\"]);\n\n      var onChangeKey;\n      var eventHandlers = {};\n      /* istanbul ignore next (preact) */\n\n      onChangeKey = 'onChange';\n\n      var _this$getState4 = _this.getState(),\n          inputValue = _this$getState4.inputValue,\n          isOpen = _this$getState4.isOpen,\n          highlightedIndex = _this$getState4.highlightedIndex;\n\n      if (!rest.disabled) {\n        var _eventHandlers;\n\n        eventHandlers = (_eventHandlers = {}, _eventHandlers[onChangeKey] = callAllEventHandlers(onChange, onInput, _this.inputHandleChange), _eventHandlers.onKeyDown = callAllEventHandlers(onKeyDown, _this.inputHandleKeyDown), _eventHandlers.onBlur = callAllEventHandlers(onBlur, _this.inputHandleBlur), _eventHandlers);\n      }\n      /* istanbul ignore if (react-native) */\n\n\n      return _extends({\n        'aria-autocomplete': 'list',\n        'aria-activedescendant': isOpen && typeof highlightedIndex === 'number' && highlightedIndex >= 0 ? _this.getItemId(highlightedIndex) : null,\n        'aria-controls': isOpen ? _this.menuId : null,\n        'aria-labelledby': _this.labelId,\n        // https://developer.mozilla.org/en-US/docs/Web/Security/Securing_your_site/Turning_off_form_autocompletion\n        // revert back since autocomplete=\"nope\" is ignored on latest Chrome and Opera\n        autoComplete: 'off',\n        value: inputValue,\n        id: _this.inputId\n      }, eventHandlers, rest);\n    };\n\n    _this.inputHandleKeyDown = function (event) {\n      var key = normalizeArrowKey(event);\n\n      if (key && _this.inputKeyDownHandlers[key]) {\n        _this.inputKeyDownHandlers[key].call(_assertThisInitialized(_this), event);\n      }\n    };\n\n    _this.inputHandleChange = function (event) {\n      _this.internalSetState({\n        type: changeInput,\n        isOpen: true,\n        inputValue: event.target.value,\n        highlightedIndex: _this.props.defaultHighlightedIndex\n      });\n    };\n\n    _this.inputHandleTextChange\n    /* istanbul ignore next (react-native) */\n    = function (text) {\n      _this.internalSetState({\n        type: changeInput,\n        isOpen: true,\n        inputValue: text,\n        highlightedIndex: _this.props.defaultHighlightedIndex\n      });\n    };\n\n    _this.inputHandleBlur = function () {\n      // Need setTimeout, so that when the user presses Tab, the activeElement is the next focused element, not the body element\n      _this.internalSetTimeout(function () {\n        var downshiftButtonIsActive = _this.props.environment.document && !!_this.props.environment.document.activeElement && !!_this.props.environment.document.activeElement.dataset && _this.props.environment.document.activeElement.dataset.toggle && _this._rootNode && _this._rootNode.contains(_this.props.environment.document.activeElement);\n\n        if (!_this.isMouseDown && !downshiftButtonIsActive) {\n          _this.reset({\n            type: blurInput\n          });\n        }\n      });\n    };\n\n    _this.menuRef = function (node) {\n      _this._menuNode = node;\n    };\n\n    _this.getMenuProps = function (_temp5, _temp6) {\n      var _extends3;\n\n      var _ref5 = _temp5 === void 0 ? {} : _temp5,\n          _ref5$refKey = _ref5.refKey,\n          refKey = _ref5$refKey === void 0 ? 'ref' : _ref5$refKey,\n          ref = _ref5.ref,\n          props = _objectWithoutPropertiesLoose(_ref5, [\"refKey\", \"ref\"]);\n\n      var _ref6 = _temp6 === void 0 ? {} : _temp6,\n          _ref6$suppressRefErro = _ref6.suppressRefError,\n          suppressRefError = _ref6$suppressRefErro === void 0 ? false : _ref6$suppressRefErro;\n\n      _this.getMenuProps.called = true;\n      _this.getMenuProps.refKey = refKey;\n      _this.getMenuProps.suppressRefError = suppressRefError;\n      return _extends((_extends3 = {}, _extends3[refKey] = callAll(ref, _this.menuRef), _extends3.role = 'listbox', _extends3['aria-labelledby'] = props && props['aria-label'] ? null : _this.labelId, _extends3.id = _this.menuId, _extends3), props);\n    };\n\n    _this.getItemProps = function (_temp7) {\n      var _enabledEventHandlers;\n\n      var _ref7 = _temp7 === void 0 ? {} : _temp7,\n          onMouseMove = _ref7.onMouseMove,\n          onMouseDown = _ref7.onMouseDown,\n          onClick = _ref7.onClick,\n          onPress = _ref7.onPress,\n          index = _ref7.index,\n          _ref7$item = _ref7.item,\n          item = _ref7$item === void 0 ? process.env.NODE_ENV === 'production' ?\n      /* istanbul ignore next */\n      undefined : requiredProp('getItemProps', 'item') : _ref7$item,\n          rest = _objectWithoutPropertiesLoose(_ref7, [\"onMouseMove\", \"onMouseDown\", \"onClick\", \"onPress\", \"index\", \"item\"]);\n\n      if (index === undefined) {\n        _this.items.push(item);\n\n        index = _this.items.indexOf(item);\n      } else {\n        _this.items[index] = item;\n      }\n\n      var onSelectKey = 'onClick';\n      var customClickHandler = onClick;\n      var enabledEventHandlers = (_enabledEventHandlers = {\n        // onMouseMove is used over onMouseEnter here. onMouseMove\n        // is only triggered on actual mouse movement while onMouseEnter\n        // can fire on DOM changes, interrupting keyboard navigation\n        onMouseMove: callAllEventHandlers(onMouseMove, function () {\n          if (index === _this.getState().highlightedIndex) {\n            return;\n          }\n\n          _this.setHighlightedIndex(index, {\n            type: itemMouseEnter\n          }); // We never want to manually scroll when changing state based\n          // on `onMouseMove` because we will be moving the element out\n          // from under the user which is currently scrolling/moving the\n          // cursor\n\n\n          _this.avoidScrolling = true;\n\n          _this.internalSetTimeout(function () {\n            return _this.avoidScrolling = false;\n          }, 250);\n        }),\n        onMouseDown: callAllEventHandlers(onMouseDown, function (event) {\n          // This prevents the activeElement from being changed\n          // to the item so it can remain with the current activeElement\n          // which is a more common use case.\n          event.preventDefault();\n        })\n      }, _enabledEventHandlers[onSelectKey] = callAllEventHandlers(customClickHandler, function () {\n        _this.selectItemAtIndex(index, {\n          type: clickItem\n        });\n      }), _enabledEventHandlers); // Passing down the onMouseDown handler to prevent redirect\n      // of the activeElement if clicking on disabled items\n\n      var eventHandlers = rest.disabled ? {\n        onMouseDown: enabledEventHandlers.onMouseDown\n      } : enabledEventHandlers;\n      return _extends({\n        id: _this.getItemId(index),\n        role: 'option',\n        'aria-selected': _this.getState().highlightedIndex === index\n      }, eventHandlers, rest);\n    };\n\n    _this.clearItems = function () {\n      _this.items = [];\n    };\n\n    _this.reset = function (otherStateToSet, cb) {\n      if (otherStateToSet === void 0) {\n        otherStateToSet = {};\n      }\n\n      otherStateToSet = pickState(otherStateToSet);\n\n      _this.internalSetState(function (_ref8) {\n        var selectedItem = _ref8.selectedItem;\n        return _extends({\n          isOpen: _this.props.defaultIsOpen,\n          highlightedIndex: _this.props.defaultHighlightedIndex,\n          inputValue: _this.props.itemToString(selectedItem)\n        }, otherStateToSet);\n      }, cb);\n    };\n\n    _this.toggleMenu = function (otherStateToSet, cb) {\n      if (otherStateToSet === void 0) {\n        otherStateToSet = {};\n      }\n\n      otherStateToSet = pickState(otherStateToSet);\n\n      _this.internalSetState(function (_ref9) {\n        var isOpen = _ref9.isOpen;\n        return _extends({\n          isOpen: !isOpen\n        }, isOpen && {\n          highlightedIndex: _this.props.defaultHighlightedIndex\n        }, otherStateToSet);\n      }, function () {\n        var _this$getState5 = _this.getState(),\n            isOpen = _this$getState5.isOpen,\n            highlightedIndex = _this$getState5.highlightedIndex;\n\n        if (isOpen) {\n          if (_this.getItemCount() > 0 && typeof highlightedIndex === 'number') {\n            _this.setHighlightedIndex(highlightedIndex, otherStateToSet);\n          }\n        }\n\n        cbToCb(cb)();\n      });\n    };\n\n    _this.openMenu = function (cb) {\n      _this.internalSetState({\n        isOpen: true\n      }, cb);\n    };\n\n    _this.closeMenu = function (cb) {\n      _this.internalSetState({\n        isOpen: false\n      }, cb);\n    };\n\n    _this.updateStatus = debounce(function () {\n      var state = _this.getState();\n\n      var item = _this.items[state.highlightedIndex];\n\n      var resultCount = _this.getItemCount();\n\n      var status = _this.props.getA11yStatusMessage(_extends({\n        itemToString: _this.props.itemToString,\n        previousResultCount: _this.previousResultCount,\n        resultCount: resultCount,\n        highlightedItem: item\n      }, state));\n\n      _this.previousResultCount = resultCount;\n      setStatus(status);\n    }, 200);\n\n    // fancy destructuring + defaults + aliases\n    // this basically says each value of state should either be set to\n    // the initial value or the default value if the initial value is not provided\n    var _this$props = _this.props,\n        defaultHighlightedIndex = _this$props.defaultHighlightedIndex,\n        _this$props$initialHi = _this$props.initialHighlightedIndex,\n        _highlightedIndex = _this$props$initialHi === void 0 ? defaultHighlightedIndex : _this$props$initialHi,\n        defaultIsOpen = _this$props.defaultIsOpen,\n        _this$props$initialIs = _this$props.initialIsOpen,\n        _isOpen = _this$props$initialIs === void 0 ? defaultIsOpen : _this$props$initialIs,\n        _this$props$initialIn = _this$props.initialInputValue,\n        _inputValue = _this$props$initialIn === void 0 ? '' : _this$props$initialIn,\n        _this$props$initialSe = _this$props.initialSelectedItem,\n        _selectedItem = _this$props$initialSe === void 0 ? null : _this$props$initialSe;\n\n    var _state = _this.getState({\n      highlightedIndex: _highlightedIndex,\n      isOpen: _isOpen,\n      inputValue: _inputValue,\n      selectedItem: _selectedItem\n    });\n\n    if (_state.selectedItem != null && _this.props.initialInputValue === undefined) {\n      _state.inputValue = _this.props.itemToString(_state.selectedItem);\n    }\n\n    _this.state = _state;\n    return _this;\n  }\n\n  var _proto = Downshift.prototype;\n\n  /**\n   * Clear all running timeouts\n   */\n  _proto.internalClearTimeouts = function internalClearTimeouts() {\n    this.timeoutIds.forEach(function (id) {\n      clearTimeout(id);\n    });\n    this.timeoutIds = [];\n  }\n  /**\n   * Gets the state based on internal state or props\n   * If a state value is passed via props, then that\n   * is the value given, otherwise it's retrieved from\n   * stateToMerge\n   *\n   * This will perform a shallow merge of the given state object\n   * with the state coming from props\n   * (for the controlled component scenario)\n   * This is used in state updater functions so they're referencing\n   * the right state regardless of where it comes from.\n   *\n   * @param {Object} stateToMerge defaults to this.state\n   * @return {Object} the state\n   */\n  ;\n\n  _proto.getState = function getState(stateToMerge) {\n    var _this4 = this;\n\n    if (stateToMerge === void 0) {\n      stateToMerge = this.state;\n    }\n\n    return Object.keys(stateToMerge).reduce(function (state, key) {\n      state[key] = _this4.isControlledProp(key) ? _this4.props[key] : stateToMerge[key];\n      return state;\n    }, {});\n  }\n  /**\n   * This determines whether a prop is a \"controlled prop\" meaning it is\n   * state which is controlled by the outside of this component rather\n   * than within this component.\n   * @param {String} key the key to check\n   * @return {Boolean} whether it is a controlled controlled prop\n   */\n  ;\n\n  _proto.isControlledProp = function isControlledProp(key) {\n    return this.props[key] !== undefined;\n  };\n\n  _proto.getItemCount = function getItemCount() {\n    // things read better this way. They're in priority order:\n    // 1. `this.itemCount`\n    // 2. `this.props.itemCount`\n    // 3. `this.items.length`\n    var itemCount = this.items.length;\n\n    if (this.itemCount != null) {\n      itemCount = this.itemCount;\n    } else if (this.props.itemCount !== undefined) {\n      itemCount = this.props.itemCount;\n    }\n\n    return itemCount;\n  };\n\n  _proto.getItemNodeFromIndex = function getItemNodeFromIndex(index) {\n    return this.props.environment.document.getElementById(this.getItemId(index));\n  };\n\n  _proto.scrollHighlightedItemIntoView = function scrollHighlightedItemIntoView() {\n    /* istanbul ignore else (react-native) */\n    {\n      var node = this.getItemNodeFromIndex(this.getState().highlightedIndex);\n      this.props.scrollIntoView(node, this._menuNode);\n    }\n  };\n\n  _proto.moveHighlightedIndex = function moveHighlightedIndex(amount, otherStateToSet) {\n    var itemCount = this.getItemCount();\n\n    if (itemCount > 0) {\n      var nextHighlightedIndex = getNextWrappingIndex(amount, this.getState().highlightedIndex, itemCount);\n      this.setHighlightedIndex(nextHighlightedIndex, otherStateToSet);\n    }\n  };\n\n  _proto.highlightFirstOrLastIndex = function highlightFirstOrLastIndex(event, first, otherStateToSet) {\n    var itemsLastIndex = this.getItemCount() - 1;\n\n    if (itemsLastIndex < 0 || !this.getState().isOpen) {\n      return;\n    }\n\n    event.preventDefault();\n    this.setHighlightedIndex(first ? 0 : itemsLastIndex, otherStateToSet);\n  };\n\n  _proto.getStateAndHelpers = function getStateAndHelpers() {\n    var _this$getState6 = this.getState(),\n        highlightedIndex = _this$getState6.highlightedIndex,\n        inputValue = _this$getState6.inputValue,\n        selectedItem = _this$getState6.selectedItem,\n        isOpen = _this$getState6.isOpen;\n\n    var itemToString = this.props.itemToString;\n    var id = this.id;\n    var getRootProps = this.getRootProps,\n        getToggleButtonProps = this.getToggleButtonProps,\n        getLabelProps = this.getLabelProps,\n        getMenuProps = this.getMenuProps,\n        getInputProps = this.getInputProps,\n        getItemProps = this.getItemProps,\n        openMenu = this.openMenu,\n        closeMenu = this.closeMenu,\n        toggleMenu = this.toggleMenu,\n        selectItem = this.selectItem,\n        selectItemAtIndex = this.selectItemAtIndex,\n        selectHighlightedItem = this.selectHighlightedItem,\n        setHighlightedIndex = this.setHighlightedIndex,\n        clearSelection = this.clearSelection,\n        clearItems = this.clearItems,\n        reset = this.reset,\n        setItemCount = this.setItemCount,\n        unsetItemCount = this.unsetItemCount,\n        setState = this.internalSetState;\n    return {\n      // prop getters\n      getRootProps: getRootProps,\n      getToggleButtonProps: getToggleButtonProps,\n      getLabelProps: getLabelProps,\n      getMenuProps: getMenuProps,\n      getInputProps: getInputProps,\n      getItemProps: getItemProps,\n      // actions\n      reset: reset,\n      openMenu: openMenu,\n      closeMenu: closeMenu,\n      toggleMenu: toggleMenu,\n      selectItem: selectItem,\n      selectItemAtIndex: selectItemAtIndex,\n      selectHighlightedItem: selectHighlightedItem,\n      setHighlightedIndex: setHighlightedIndex,\n      clearSelection: clearSelection,\n      clearItems: clearItems,\n      setItemCount: setItemCount,\n      unsetItemCount: unsetItemCount,\n      setState: setState,\n      // props\n      itemToString: itemToString,\n      // derived\n      id: id,\n      // state\n      highlightedIndex: highlightedIndex,\n      inputValue: inputValue,\n      isOpen: isOpen,\n      selectedItem: selectedItem\n    };\n  } //////////////////////////// ROOT\n  ;\n\n  _proto.componentDidMount = function componentDidMount() {\n    var _this5 = this;\n\n    /* istanbul ignore if (react-native) */\n    if (process.env.NODE_ENV !== 'production' && !false && this.getMenuProps.called && !this.getMenuProps.suppressRefError) {\n      validateGetMenuPropsCalledCorrectly(this._menuNode, this.getMenuProps);\n    }\n    /* istanbul ignore if (react-native) */\n\n\n    {\n      var targetWithinDownshift = function (target, checkActiveElement) {\n        if (checkActiveElement === void 0) {\n          checkActiveElement = true;\n        }\n\n        var document = _this5.props.environment.document;\n        return [_this5._rootNode, _this5._menuNode].some(function (contextNode) {\n          return contextNode && (isOrContainsNode(contextNode, target) || checkActiveElement && isOrContainsNode(contextNode, document.activeElement));\n        });\n      }; // this.isMouseDown helps us track whether the mouse is currently held down.\n      // This is useful when the user clicks on an item in the list, but holds the mouse\n      // down long enough for the list to disappear (because the blur event fires on the input)\n      // this.isMouseDown is used in the blur handler on the input to determine whether the blur event should\n      // trigger hiding the menu.\n\n\n      var onMouseDown = function () {\n        _this5.isMouseDown = true;\n      };\n\n      var onMouseUp = function (event) {\n        _this5.isMouseDown = false; // if the target element or the activeElement is within a downshift node\n        // then we don't want to reset downshift\n\n        var contextWithinDownshift = targetWithinDownshift(event.target);\n\n        if (!contextWithinDownshift && _this5.getState().isOpen) {\n          _this5.reset({\n            type: mouseUp\n          }, function () {\n            return _this5.props.onOuterClick(_this5.getStateAndHelpers());\n          });\n        }\n      }; // Touching an element in iOS gives focus and hover states, but touching out of\n      // the element will remove hover, and persist the focus state, resulting in the\n      // blur event not being triggered.\n      // this.isTouchMove helps us track whether the user is tapping or swiping on a touch screen.\n      // If the user taps outside of Downshift, the component should be reset,\n      // but not if the user is swiping\n\n\n      var onTouchStart = function () {\n        _this5.isTouchMove = false;\n      };\n\n      var onTouchMove = function () {\n        _this5.isTouchMove = true;\n      };\n\n      var onTouchEnd = function (event) {\n        var contextWithinDownshift = targetWithinDownshift(event.target, false);\n\n        if (!_this5.isTouchMove && !contextWithinDownshift && _this5.getState().isOpen) {\n          _this5.reset({\n            type: touchEnd\n          }, function () {\n            return _this5.props.onOuterClick(_this5.getStateAndHelpers());\n          });\n        }\n      };\n\n      this.props.environment.addEventListener('mousedown', onMouseDown);\n      this.props.environment.addEventListener('mouseup', onMouseUp);\n      this.props.environment.addEventListener('touchstart', onTouchStart);\n      this.props.environment.addEventListener('touchmove', onTouchMove);\n      this.props.environment.addEventListener('touchend', onTouchEnd);\n\n      this.cleanup = function () {\n        _this5.internalClearTimeouts();\n\n        _this5.updateStatus.cancel();\n\n        _this5.props.environment.removeEventListener('mousedown', onMouseDown);\n\n        _this5.props.environment.removeEventListener('mouseup', onMouseUp);\n\n        _this5.props.environment.removeEventListener('touchstart', onTouchStart);\n\n        _this5.props.environment.removeEventListener('touchmove', onTouchMove);\n\n        _this5.props.environment.removeEventListener('touchend', onTouchEnd);\n      };\n    }\n  };\n\n  _proto.shouldScroll = function shouldScroll(prevState, prevProps) {\n    var _ref10 = this.props.highlightedIndex === undefined ? this.getState() : this.props,\n        currentHighlightedIndex = _ref10.highlightedIndex;\n\n    var _ref11 = prevProps.highlightedIndex === undefined ? prevState : prevProps,\n        prevHighlightedIndex = _ref11.highlightedIndex;\n\n    var scrollWhenOpen = currentHighlightedIndex && this.getState().isOpen && !prevState.isOpen;\n    return scrollWhenOpen || currentHighlightedIndex !== prevHighlightedIndex;\n  };\n\n  _proto.componentDidUpdate = function componentDidUpdate(prevProps, prevState) {\n    if (process.env.NODE_ENV !== 'production') {\n      validateControlledUnchanged(prevProps, this.props);\n      /* istanbul ignore if (react-native) */\n\n      if (this.getMenuProps.called && !this.getMenuProps.suppressRefError) {\n        validateGetMenuPropsCalledCorrectly(this._menuNode, this.getMenuProps);\n      }\n    }\n\n    if (this.isControlledProp('selectedItem') && this.props.selectedItemChanged(prevProps.selectedItem, this.props.selectedItem)) {\n      this.internalSetState({\n        type: controlledPropUpdatedSelectedItem,\n        inputValue: this.props.itemToString(this.props.selectedItem)\n      });\n    }\n\n    if (!this.avoidScrolling && this.shouldScroll(prevState, prevProps)) {\n      this.scrollHighlightedItemIntoView();\n    }\n    /* istanbul ignore else (react-native) */\n\n\n    this.updateStatus();\n  };\n\n  _proto.componentWillUnmount = function componentWillUnmount() {\n    this.cleanup(); // avoids memory leak\n  };\n\n  _proto.render = function render() {\n    var children = unwrapArray(this.props.children, noop); // because the items are rerendered every time we call the children\n    // we clear this out each render and it will be populated again as\n    // getItemProps is called.\n\n    this.clearItems(); // we reset this so we know whether the user calls getRootProps during\n    // this render. If they do then we don't need to do anything,\n    // if they don't then we need to clone the element they return and\n    // apply the props for them.\n\n    this.getRootProps.called = false;\n    this.getRootProps.refKey = undefined;\n    this.getRootProps.suppressRefError = undefined; // we do something similar for getMenuProps\n\n    this.getMenuProps.called = false;\n    this.getMenuProps.refKey = undefined;\n    this.getMenuProps.suppressRefError = undefined; // we do something similar for getLabelProps\n\n    this.getLabelProps.called = false; // and something similar for getInputProps\n\n    this.getInputProps.called = false;\n    var element = unwrapArray(children(this.getStateAndHelpers()));\n\n    if (!element) {\n      return null;\n    }\n\n    if (this.getRootProps.called || this.props.suppressRefError) {\n      if (process.env.NODE_ENV !== 'production' && !this.getRootProps.suppressRefError && !this.props.suppressRefError) {\n        validateGetRootPropsCalledCorrectly(element, this.getRootProps);\n      }\n\n      return element;\n    } else if (isDOMElement(element)) {\n      // they didn't apply the root props, but we can clone\n      // this and apply the props ourselves\n      return React.cloneElement(element, this.getRootProps(getElementProps(element)));\n    }\n    /* istanbul ignore else */\n\n\n    if (process.env.NODE_ENV !== 'production') {\n      // they didn't apply the root props, but they need to\n      // otherwise we can't query around the autocomplete\n      throw new Error('downshift: If you return a non-DOM element, you must use apply the getRootProps function');\n    }\n    /* istanbul ignore next */\n\n\n    return undefined;\n  };\n\n  return Downshift;\n}(Component);\n\nDownshift.defaultProps = {\n  defaultHighlightedIndex: null,\n  defaultIsOpen: false,\n  getA11yStatusMessage: getA11yStatusMessage,\n  itemToString: function itemToString(i) {\n    if (i == null) {\n      return '';\n    }\n\n    if (process.env.NODE_ENV !== 'production' && isPlainObject(i) && !i.hasOwnProperty('toString')) {\n      // eslint-disable-next-line no-console\n      console.warn('downshift: An object was passed to the default implementation of `itemToString`. You should probably provide your own `itemToString` implementation. Please refer to the `itemToString` API documentation.', 'The object that was passed:', i);\n    }\n\n    return String(i);\n  },\n  onStateChange: noop,\n  onInputValueChange: noop,\n  onUserAction: noop,\n  onChange: noop,\n  onSelect: noop,\n  onOuterClick: noop,\n  selectedItemChanged: function selectedItemChanged(prevItem, item) {\n    return prevItem !== item;\n  },\n  environment: typeof window === 'undefined'\n  /* istanbul ignore next (ssr) */\n  ? {} : window,\n  stateReducer: function stateReducer(state, stateToSet) {\n    return stateToSet;\n  },\n  suppressRefError: false,\n  scrollIntoView: scrollIntoView\n};\nDownshift.stateChangeTypes = stateChangeTypes;\nprocess.env.NODE_ENV !== \"production\" ? Downshift.propTypes = {\n  children: PropTypes.func,\n  defaultHighlightedIndex: PropTypes.number,\n  defaultIsOpen: PropTypes.bool,\n  initialHighlightedIndex: PropTypes.number,\n  initialSelectedItem: PropTypes.any,\n  initialInputValue: PropTypes.string,\n  initialIsOpen: PropTypes.bool,\n  getA11yStatusMessage: PropTypes.func,\n  itemToString: PropTypes.func,\n  onChange: PropTypes.func,\n  onSelect: PropTypes.func,\n  onStateChange: PropTypes.func,\n  onInputValueChange: PropTypes.func,\n  onUserAction: PropTypes.func,\n  onOuterClick: PropTypes.func,\n  selectedItemChanged: PropTypes.func,\n  stateReducer: PropTypes.func,\n  itemCount: PropTypes.number,\n  id: PropTypes.string,\n  environment: PropTypes.shape({\n    addEventListener: PropTypes.func,\n    removeEventListener: PropTypes.func,\n    document: PropTypes.shape({\n      getElementById: PropTypes.func,\n      activeElement: PropTypes.any,\n      body: PropTypes.any\n    })\n  }),\n  suppressRefError: PropTypes.bool,\n  scrollIntoView: PropTypes.func,\n  // things we keep in state for uncontrolled components\n  // but can accept as props for controlled components\n\n  /* eslint-disable react/no-unused-prop-types */\n  selectedItem: PropTypes.any,\n  isOpen: PropTypes.bool,\n  inputValue: PropTypes.string,\n  highlightedIndex: PropTypes.number,\n  labelId: PropTypes.string,\n  inputId: PropTypes.string,\n  menuId: PropTypes.string,\n  getItemId: PropTypes.func\n  /* eslint-enable react/no-unused-prop-types */\n\n} : void 0;\n\nfunction validateGetMenuPropsCalledCorrectly(node, _ref12) {\n  var refKey = _ref12.refKey;\n\n  if (!node) {\n    // eslint-disable-next-line no-console\n    console.error(\"downshift: The ref prop \\\"\" + refKey + \"\\\" from getMenuProps was not applied correctly on your menu element.\");\n  }\n}\n\nfunction validateGetRootPropsCalledCorrectly(element, _ref13) {\n  var refKey = _ref13.refKey;\n  var refKeySpecified = refKey !== 'ref';\n  var isComposite = !isDOMElement(element);\n\n  if (isComposite && !refKeySpecified && !isForwardRef(element)) {\n    // eslint-disable-next-line no-console\n    console.error('downshift: You returned a non-DOM element. You must specify a refKey in getRootProps');\n  } else if (!isComposite && refKeySpecified) {\n    // eslint-disable-next-line no-console\n    console.error(\"downshift: You returned a DOM element. You should not specify a refKey in getRootProps. You specified \\\"\" + refKey + \"\\\"\");\n  }\n\n  if (!isForwardRef(element) && !getElementProps(element)[refKey]) {\n    // eslint-disable-next-line no-console\n    console.error(\"downshift: You must apply the ref prop \\\"\" + refKey + \"\\\" from getRootProps onto your root element.\");\n  }\n}\n\nfunction validateControlledUnchanged(prevProps, nextProps) {\n  var warningDescription = \"This prop should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled Downshift element for the lifetime of the component. More info: https://github.com/downshift-js/downshift#control-props\";\n  ['selectedItem', 'isOpen', 'inputValue', 'highlightedIndex'].forEach(function (propKey) {\n    if (prevProps[propKey] !== undefined && nextProps[propKey] === undefined) {\n      // eslint-disable-next-line no-console\n      console.error(\"downshift: A component has changed the controlled prop \\\"\" + propKey + \"\\\" to be uncontrolled. \" + warningDescription);\n    } else if (prevProps[propKey] === undefined && nextProps[propKey] !== undefined) {\n      // eslint-disable-next-line no-console\n      console.error(\"downshift: A component has changed the uncontrolled prop \\\"\" + propKey + \"\\\" to be controlled. \" + warningDescription);\n    }\n  });\n}\n\nexport default Downshift;\nexport { resetIdCounter };\n"]},"metadata":{},"sourceType":"module"}
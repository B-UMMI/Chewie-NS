{"ast":null,"code":"var __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\n\nimport React, { Children, cloneElement } from 'react';\nimport PropTypes from 'prop-types';\nimport { useInput, useReferenceInputController, warning as warningLog } from 'ra-core';\nimport sanitizeInputProps from './sanitizeRestProps';\nimport LinearProgress from '../layout/LinearProgress';\nimport Labeled from './Labeled';\nimport ReferenceError from './ReferenceError';\n/**\n * An Input component for choosing a reference record. Useful for foreign keys.\n *\n * This component fetches the possible values in the reference resource\n * (using `dataProvider.getMatching()`), then delegates rendering\n * to a subcomponent, to which it passes the possible choices\n * as the `choices` attribute.\n *\n * Use it with a selector component as child, like `<AutocompleteInput>`,\n * `<SelectInput>`, or `<RadioButtonGroupInput>`.\n *\n * @example\n * export const CommentEdit = (props) => (\n *     <Edit {...props}>\n *         <SimpleForm>\n *             <ReferenceInput label=\"Post\" source=\"post_id\" reference=\"posts\">\n *                 <AutocompleteInput optionText=\"title\" />\n *             </ReferenceInput>\n *         </SimpleForm>\n *     </Edit>\n * );\n *\n * @example\n * export const CommentEdit = (props) => (\n *     <Edit {...props}>\n *         <SimpleForm>\n *             <ReferenceInput label=\"Post\" source=\"post_id\" reference=\"posts\">\n *                 <SelectInput optionText=\"title\" />\n *             </ReferenceInput>\n *         </SimpleForm>\n *     </Edit>\n * );\n *\n * By default, restricts the possible values to 25. You can extend this limit\n * by setting the `perPage` prop.\n *\n * @example\n * <ReferenceInput\n *      source=\"post_id\"\n *      reference=\"posts\"\n *      perPage={100}>\n *     <SelectInput optionText=\"title\" />\n * </ReferenceInput>\n *\n * By default, orders the possible values by id desc. You can change this order\n * by setting the `sort` prop (an object with `field` and `order` properties).\n *\n * @example\n * <ReferenceInput\n *      source=\"post_id\"\n *      reference=\"posts\"\n *      sort={{ field: 'title', order: 'ASC' }}>\n *     <SelectInput optionText=\"title\" />\n * </ReferenceInput>\n *\n * Also, you can filter the query used to populate the possible values. Use the\n * `filter` prop for that.\n *\n * @example\n * <ReferenceInput\n *      source=\"post_id\"\n *      reference=\"posts\"\n *      filter={{ is_published: true }}>\n *     <SelectInput optionText=\"title\" />\n * </ReferenceInput>\n *\n * The enclosed component may filter results. ReferenceInput passes a `setFilter`\n * function as prop to its child component. It uses the value to create a filter\n * for the query - by default { q: [searchText] }. You can customize the mapping\n * searchText => searchQuery by setting a custom `filterToQuery` function prop:\n *\n * @example\n * <ReferenceInput\n *      source=\"post_id\"\n *      reference=\"posts\"\n *      filterToQuery={searchText => ({ title: searchText })}>\n *     <AutocompleteInput optionText=\"title\" />\n * </ReferenceInput>\n */\n\nvar ReferenceInput = function (_a) {\n  var format = _a.format,\n      onBlur = _a.onBlur,\n      onChange = _a.onChange,\n      onFocus = _a.onFocus,\n      parse = _a.parse,\n      validate = _a.validate,\n      props = __rest(_a, [\"format\", \"onBlur\", \"onChange\", \"onFocus\", \"parse\", \"validate\"]);\n\n  var inputProps = useInput(__assign({\n    format: format,\n    onBlur: onBlur,\n    onChange: onChange,\n    onFocus: onFocus,\n    parse: parse,\n    validate: validate\n  }, props));\n  return React.createElement(ReferenceInputView, __assign({}, inputProps, props, useReferenceInputController(__assign(__assign({}, props), inputProps))));\n};\n\nReferenceInput.propTypes = {\n  allowEmpty: PropTypes.bool,\n  basePath: PropTypes.string,\n  children: PropTypes.element.isRequired,\n  className: PropTypes.string,\n  classes: PropTypes.object,\n  filter: PropTypes.object,\n  filterToQuery: PropTypes.func.isRequired,\n  label: PropTypes.string,\n  onChange: PropTypes.func,\n  perPage: PropTypes.number,\n  record: PropTypes.object,\n  reference: PropTypes.string.isRequired,\n  resource: PropTypes.string,\n  sort: PropTypes.shape({\n    field: PropTypes.string,\n    order: PropTypes.oneOf(['ASC', 'DESC'])\n  }),\n  source: PropTypes.string\n};\nReferenceInput.defaultProps = {\n  filter: {},\n  filterToQuery: function (searchText) {\n    return searchText ? {\n      q: searchText\n    } : {};\n  },\n  perPage: 25,\n  sort: {\n    field: 'id',\n    order: 'DESC'\n  }\n};\n\nvar sanitizeRestProps = function (_a) {\n  var choices = _a.choices,\n      className = _a.className,\n      crudGetMatching = _a.crudGetMatching,\n      crudGetOne = _a.crudGetOne,\n      filter = _a.filter,\n      filterToQuery = _a.filterToQuery,\n      onChange = _a.onChange,\n      perPage = _a.perPage,\n      reference = _a.reference,\n      referenceSource = _a.referenceSource,\n      setFilter = _a.setFilter,\n      setPagination = _a.setPagination,\n      setSort = _a.setSort,\n      sort = _a.sort,\n      validation = _a.validation,\n      rest = __rest(_a, [\"choices\", \"className\", \"crudGetMatching\", \"crudGetOne\", \"filter\", \"filterToQuery\", \"onChange\", \"perPage\", \"reference\", \"referenceSource\", \"setFilter\", \"setPagination\", \"setSort\", \"sort\", \"validation\"]);\n\n  return sanitizeInputProps(rest);\n};\n\nexport var ReferenceInputView = function (_a) {\n  var allowEmpty = _a.allowEmpty,\n      basePath = _a.basePath,\n      children = _a.children,\n      choices = _a.choices,\n      classes = _a.classes,\n      className = _a.className,\n      error = _a.error,\n      helperText = _a.helperText,\n      id = _a.id,\n      input = _a.input,\n      isRequired = _a.isRequired,\n      loading = _a.loading,\n      label = _a.label,\n      meta = _a.meta,\n      resource = _a.resource,\n      setFilter = _a.setFilter,\n      setPagination = _a.setPagination,\n      setSort = _a.setSort,\n      source = _a.source,\n      warning = _a.warning,\n      rest = __rest(_a, [\"allowEmpty\", \"basePath\", \"children\", \"choices\", \"classes\", \"className\", \"error\", \"helperText\", \"id\", \"input\", \"isRequired\", \"loading\", \"label\", \"meta\", \"resource\", \"setFilter\", \"setPagination\", \"setSort\", \"source\", \"warning\"]);\n\n  if (Children.count(children) !== 1) {\n    throw new Error('<ReferenceInput> only accepts a single child');\n  }\n\n  if (loading) {\n    return React.createElement(Labeled, {\n      id: id,\n      label: label,\n      source: source,\n      resource: resource,\n      className: className,\n      isRequired: isRequired,\n      meta: meta,\n      input: input\n    }, React.createElement(LinearProgress, null));\n  } // This is not a final-form error but an unrecoverable error from the\n  // useReferenceInputController hook\n\n\n  if (error) {\n    return React.createElement(ReferenceError, {\n      label: label,\n      error: error\n    });\n  } // When the useReferenceInputController returns a warning, it means there it\n  // had an issue trying to load the referenced record\n  // We display it by overriding the final-form meta\n\n\n  var finalMeta = warning ? __assign(__assign({}, meta), {\n    error: warning\n  }) : meta; // helperText should never be set on ReferenceInput, only in child component\n  // But in a Filter component, the child helperText have to be forced to false\n\n  warningLog(helperText !== undefined && helperText !== false, \"<ReferenceInput> doesn't accept a helperText prop. Set the helperText prop on the child component instead\");\n  var disabledHelperText = helperText === false ? {\n    helperText: helperText\n  } : {};\n  return cloneElement(children, __assign(__assign({\n    allowEmpty: allowEmpty,\n    classes: classes,\n    className: className,\n    input: input,\n    isRequired: isRequired,\n    label: label,\n    resource: resource,\n    meta: finalMeta,\n    source: source,\n    choices: choices,\n    basePath: basePath,\n    setFilter: setFilter,\n    setPagination: setPagination,\n    setSort: setSort,\n    translateChoice: false\n  }, disabledHelperText), sanitizeRestProps(rest)));\n};\nexport default ReferenceInput;","map":{"version":3,"sources":["/node_modules/ra-ui-materialui/esm/input/ReferenceInput.js"],"names":["__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","__rest","e","indexOf","getOwnPropertySymbols","propertyIsEnumerable","React","Children","cloneElement","PropTypes","useInput","useReferenceInputController","warning","warningLog","sanitizeInputProps","LinearProgress","Labeled","ReferenceError","ReferenceInput","_a","format","onBlur","onChange","onFocus","parse","validate","props","inputProps","createElement","ReferenceInputView","propTypes","allowEmpty","bool","basePath","string","children","element","isRequired","className","classes","object","filter","filterToQuery","func","label","perPage","number","record","reference","resource","sort","shape","field","order","oneOf","source","defaultProps","searchText","q","sanitizeRestProps","choices","crudGetMatching","crudGetOne","referenceSource","setFilter","setPagination","setSort","validation","rest","error","helperText","id","input","loading","meta","count","Error","finalMeta","undefined","disabledHelperText","translateChoice"],"mappings":"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","sourcesContent":["var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport React, { Children, cloneElement, } from 'react';\nimport PropTypes from 'prop-types';\nimport { useInput, useReferenceInputController, warning as warningLog, } from 'ra-core';\nimport sanitizeInputProps from './sanitizeRestProps';\nimport LinearProgress from '../layout/LinearProgress';\nimport Labeled from './Labeled';\nimport ReferenceError from './ReferenceError';\n/**\n * An Input component for choosing a reference record. Useful for foreign keys.\n *\n * This component fetches the possible values in the reference resource\n * (using `dataProvider.getMatching()`), then delegates rendering\n * to a subcomponent, to which it passes the possible choices\n * as the `choices` attribute.\n *\n * Use it with a selector component as child, like `<AutocompleteInput>`,\n * `<SelectInput>`, or `<RadioButtonGroupInput>`.\n *\n * @example\n * export const CommentEdit = (props) => (\n *     <Edit {...props}>\n *         <SimpleForm>\n *             <ReferenceInput label=\"Post\" source=\"post_id\" reference=\"posts\">\n *                 <AutocompleteInput optionText=\"title\" />\n *             </ReferenceInput>\n *         </SimpleForm>\n *     </Edit>\n * );\n *\n * @example\n * export const CommentEdit = (props) => (\n *     <Edit {...props}>\n *         <SimpleForm>\n *             <ReferenceInput label=\"Post\" source=\"post_id\" reference=\"posts\">\n *                 <SelectInput optionText=\"title\" />\n *             </ReferenceInput>\n *         </SimpleForm>\n *     </Edit>\n * );\n *\n * By default, restricts the possible values to 25. You can extend this limit\n * by setting the `perPage` prop.\n *\n * @example\n * <ReferenceInput\n *      source=\"post_id\"\n *      reference=\"posts\"\n *      perPage={100}>\n *     <SelectInput optionText=\"title\" />\n * </ReferenceInput>\n *\n * By default, orders the possible values by id desc. You can change this order\n * by setting the `sort` prop (an object with `field` and `order` properties).\n *\n * @example\n * <ReferenceInput\n *      source=\"post_id\"\n *      reference=\"posts\"\n *      sort={{ field: 'title', order: 'ASC' }}>\n *     <SelectInput optionText=\"title\" />\n * </ReferenceInput>\n *\n * Also, you can filter the query used to populate the possible values. Use the\n * `filter` prop for that.\n *\n * @example\n * <ReferenceInput\n *      source=\"post_id\"\n *      reference=\"posts\"\n *      filter={{ is_published: true }}>\n *     <SelectInput optionText=\"title\" />\n * </ReferenceInput>\n *\n * The enclosed component may filter results. ReferenceInput passes a `setFilter`\n * function as prop to its child component. It uses the value to create a filter\n * for the query - by default { q: [searchText] }. You can customize the mapping\n * searchText => searchQuery by setting a custom `filterToQuery` function prop:\n *\n * @example\n * <ReferenceInput\n *      source=\"post_id\"\n *      reference=\"posts\"\n *      filterToQuery={searchText => ({ title: searchText })}>\n *     <AutocompleteInput optionText=\"title\" />\n * </ReferenceInput>\n */\nvar ReferenceInput = function (_a) {\n    var format = _a.format, onBlur = _a.onBlur, onChange = _a.onChange, onFocus = _a.onFocus, parse = _a.parse, validate = _a.validate, props = __rest(_a, [\"format\", \"onBlur\", \"onChange\", \"onFocus\", \"parse\", \"validate\"]);\n    var inputProps = useInput(__assign({ format: format,\n        onBlur: onBlur,\n        onChange: onChange,\n        onFocus: onFocus,\n        parse: parse,\n        validate: validate }, props));\n    return (React.createElement(ReferenceInputView, __assign({}, inputProps, props, useReferenceInputController(__assign(__assign({}, props), inputProps)))));\n};\nReferenceInput.propTypes = {\n    allowEmpty: PropTypes.bool,\n    basePath: PropTypes.string,\n    children: PropTypes.element.isRequired,\n    className: PropTypes.string,\n    classes: PropTypes.object,\n    filter: PropTypes.object,\n    filterToQuery: PropTypes.func.isRequired,\n    label: PropTypes.string,\n    onChange: PropTypes.func,\n    perPage: PropTypes.number,\n    record: PropTypes.object,\n    reference: PropTypes.string.isRequired,\n    resource: PropTypes.string,\n    sort: PropTypes.shape({\n        field: PropTypes.string,\n        order: PropTypes.oneOf(['ASC', 'DESC']),\n    }),\n    source: PropTypes.string,\n};\nReferenceInput.defaultProps = {\n    filter: {},\n    filterToQuery: function (searchText) { return (searchText ? { q: searchText } : {}); },\n    perPage: 25,\n    sort: { field: 'id', order: 'DESC' },\n};\nvar sanitizeRestProps = function (_a) {\n    var choices = _a.choices, className = _a.className, crudGetMatching = _a.crudGetMatching, crudGetOne = _a.crudGetOne, filter = _a.filter, filterToQuery = _a.filterToQuery, onChange = _a.onChange, perPage = _a.perPage, reference = _a.reference, referenceSource = _a.referenceSource, setFilter = _a.setFilter, setPagination = _a.setPagination, setSort = _a.setSort, sort = _a.sort, validation = _a.validation, rest = __rest(_a, [\"choices\", \"className\", \"crudGetMatching\", \"crudGetOne\", \"filter\", \"filterToQuery\", \"onChange\", \"perPage\", \"reference\", \"referenceSource\", \"setFilter\", \"setPagination\", \"setSort\", \"sort\", \"validation\"]);\n    return sanitizeInputProps(rest);\n};\nexport var ReferenceInputView = function (_a) {\n    var allowEmpty = _a.allowEmpty, basePath = _a.basePath, children = _a.children, choices = _a.choices, classes = _a.classes, className = _a.className, error = _a.error, helperText = _a.helperText, id = _a.id, input = _a.input, isRequired = _a.isRequired, loading = _a.loading, label = _a.label, meta = _a.meta, resource = _a.resource, setFilter = _a.setFilter, setPagination = _a.setPagination, setSort = _a.setSort, source = _a.source, warning = _a.warning, rest = __rest(_a, [\"allowEmpty\", \"basePath\", \"children\", \"choices\", \"classes\", \"className\", \"error\", \"helperText\", \"id\", \"input\", \"isRequired\", \"loading\", \"label\", \"meta\", \"resource\", \"setFilter\", \"setPagination\", \"setSort\", \"source\", \"warning\"]);\n    if (Children.count(children) !== 1) {\n        throw new Error('<ReferenceInput> only accepts a single child');\n    }\n    if (loading) {\n        return (React.createElement(Labeled, { id: id, label: label, source: source, resource: resource, className: className, isRequired: isRequired, meta: meta, input: input },\n            React.createElement(LinearProgress, null)));\n    }\n    // This is not a final-form error but an unrecoverable error from the\n    // useReferenceInputController hook\n    if (error) {\n        return React.createElement(ReferenceError, { label: label, error: error });\n    }\n    // When the useReferenceInputController returns a warning, it means there it\n    // had an issue trying to load the referenced record\n    // We display it by overriding the final-form meta\n    var finalMeta = warning\n        ? __assign(__assign({}, meta), { error: warning }) : meta;\n    // helperText should never be set on ReferenceInput, only in child component\n    // But in a Filter component, the child helperText have to be forced to false\n    warningLog(helperText !== undefined && helperText !== false, \"<ReferenceInput> doesn't accept a helperText prop. Set the helperText prop on the child component instead\");\n    var disabledHelperText = helperText === false ? { helperText: helperText } : {};\n    return cloneElement(children, __assign(__assign({ allowEmpty: allowEmpty,\n        classes: classes,\n        className: className,\n        input: input,\n        isRequired: isRequired,\n        label: label,\n        resource: resource, meta: finalMeta, source: source,\n        choices: choices,\n        basePath: basePath,\n        setFilter: setFilter,\n        setPagination: setPagination,\n        setSort: setSort, translateChoice: false }, disabledHelperText), sanitizeRestProps(rest)));\n};\nexport default ReferenceInput;\n"]},"metadata":{},"sourceType":"module"}